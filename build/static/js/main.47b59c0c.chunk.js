(this.webpackJsonpavrwiki=this.webpackJsonpavrwiki||[]).push([[0],{177:function(e,t,a){"use strict";a.r(t);var s=a(50),c=a.n(s),n=(a(165),a(0)),i=a.n(n),l=a(10),r=a(11),o=a(144),j=a(6);const d=Object(o.a)({apiKey:"AIzaSyDmscoqM0dADurGUNvNVQM7cforGDNbCeo",authDomain:"artist-vocal-range-wiki.firebaseapp.com",projectId:"artist-vocal-range-wiki",storageBucket:"artist-vocal-range-wiki.firebasestorage.app",messagingSenderId:"224929309093",appId:"1:224929309093:web:b1ffe1a70f140c6115c84c"}),b=Object(r.c)(d),u=Object(j.g)(d);var h=a(192),x=a(191),O=a(73),p=a(190),m=a(189),g=a(178),f=a(15),y=a(1);var v=function(e){let{user:t}=e;const a=Object(l.o)(),s=Object(l.q)(),c=Object(n.useRef)(null),[i,o]=Object(n.useState)(""),[d,v]=Object(n.useState)([]),[w,S]=Object(n.useState)([]);Object(n.useEffect)((()=>{(async()=>{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title")),t=await Object(j.f)(e),a=await Promise.all(t.docs.map((async e=>{const t=Object(j.b)(u,"posts",e.id,"songDatas"),a=(await Object(j.f)(t)).docs.map((e=>e.data().songName));return{id:e.id,title:e.data().title,songs:a}})));S(a)})()}),[]);const C=e=>{c.current&&!c.current.contains(e.target)&&(o(""),v([]))};return Object(n.useEffect)((()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)})),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(x.a,{item:!0,trigger:Object(y.jsx)(O.a,{name:"globe",size:"large"}),icon:null,options:[{key:"en",value:"en",text:"English"},{key:"zh",value:"zh",text:"\u7e41\u9ad4\u4e2d\u6587"},{key:"jp",value:"jp",text:"\u65e5\u672c\u8a9e"}],onChange:(e,t)=>{let{value:a}=t;"en"===a?s("/en/posts"):"zh"===a?s("/zh/posts"):"jp"===a&&s("/jp/posts")}}),Object(y.jsxs)(h.a.Item,{as:f.b,to:"/en/posts",children:["AVRWIKI",Object(y.jsx)(O.a,{name:"home"})]}),Object(y.jsx)("div",{ref:c,style:{display:"flex",justifyContent:"center",flexGrow:1},children:Object(y.jsx)(p.a,{placeholder:"Search...",value:i,onSearchChange:(e,t)=>{let{value:a}=t;if(o(a),!a)return void v([]);const s=w.flatMap((e=>[...e.title.toLowerCase().includes(a.toLowerCase())?[{title:e.title,id:e.id}]:[],...e.songs.filter((e=>e.toLowerCase().includes(a.toLowerCase()))).map((t=>({title:"".concat(e.title," - ").concat(t),id:"".concat(e.id,"-").concat(t)})))]));v(s)},results:d,onResultSelect:(e,t)=>{let{result:a}=t;const c=a.id.split("-")[0];s("/en/posts/".concat(c)),o(""),v([])}})})]}),!t&&Object(y.jsx)(m.a,{style:{padding:"0px 0px 15px 0px",width:"95%",display:"flex",justifyContent:"flex-end"},children:Object(y.jsx)(h.a.Item,{as:f.b,to:"/en/signin",style:{fontSize:"14px"},children:Object(y.jsx)(g.a,{primary:!0,style:{width:75,fontSize:"9px"},children:"Sign In"})})}),t&&Object(y.jsxs)(m.a,{style:{padding:"0px 0px 15px 0px",width:"95%",display:"flex",justifyContent:"flex-end"},children:["/en/posts"===a.pathname&&Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{style:{width:75,fontSize:"9px"},as:f.b,to:"/en/new-artist",children:"Add Artist"})}),Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{color:"violet",style:{width:75,fontSize:"9px"},as:f.b,to:"/en/mysettings",children:"Account"})}),Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{color:"pink",style:{width:75,fontSize:"9px"},onClick:()=>{Object(r.g)(b),s("/en/posts")},children:"Sign Out"})})]})]})},w=a(193),S=a(204),C=a(198);var k=function(){const[e,t]=i.a.useState("signin"),[a,s]=i.a.useState(""),[c,n]=i.a.useState(""),[o,j]=i.a.useState(""),[d,u]=i.a.useState(!1),x=Object(l.q)(),[O,p]=i.a.useState(""),[g,f]=i.a.useState(!1),v=i.a.useRef(!0);return i.a.useEffect((()=>(v.current=!0,()=>{v.current=!1})),[]),Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(h.a,{widths:"2",color:"blue",children:[Object(y.jsx)(h.a.Item,{active:"signin"===e,onClick:()=>{p(""),t("signin")},children:"Sign in"}),Object(y.jsx)(h.a.Item,{active:"register"===e,onClick:()=>{p(""),t("register")},children:"Register"})]}),Object(y.jsxs)(w.a,{onSubmit:function(){if(f(!0),"register"===e){if(c!==o)return p("Passwords do not match"),void f(!1);Object(r.b)(b,a,c).then((()=>b.signOut())).then((()=>{v.current&&(f(!1),x("/en/registersuccess"))})).catch((e=>{if(console.error("Error:",e),v.current){switch(e.code){case"auth/email-already-in-use":p("Email already exists");break;case"auth/invalid-email":p("Invalid email format");break;case"auth/weak-password":p("Password is too weak");break;default:p("An error occurred, please try again later")}f(!1)}}))}else"signin"===e&&Object(r.f)(b,a,c).then((()=>{v.current&&(x("/en/posts"),f(!1))})).catch((e=>{if(console.error("Error:",e),v.current){switch(e.code){case"auth/invalid-email":p("Invalid email format");break;case"auth/invalid-credential":p("Incorrect email or password");break;default:p("An error occurred, please try again later")}f(!1)}}))},children:[Object(y.jsx)(w.a.Input,{label:"Email",value:a,onChange:e=>s(e.target.value),placeholder:"Please enter your email"}),Object(y.jsx)(w.a.Input,{label:"Password",type:d?"text":"password",value:c,onChange:e=>n(e.target.value),placeholder:"Please enter your password"}),"register"===e&&Object(y.jsx)(w.a.Input,{label:"Confirm Password",type:d?"text":"password",value:o,onChange:e=>j(e.target.value),placeholder:"Please confirm your password"}),Object(y.jsx)(w.a.Field,{children:Object(y.jsx)(S.a,{label:"Show Password",checked:d,onChange:()=>u(!d)})}),O&&Object(y.jsx)(C.a,{negative:!0,children:O}),Object(y.jsxs)(w.a.Button,{loading:g,children:["signin"===e&&"Sign in","register"===e&&"Register"]})]})]})};var z=function(){const e=Object(l.q)();return Object(y.jsxs)(m.a,{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[Object(y.jsxs)(C.a,{success:!0,children:[Object(y.jsx)(C.a.Header,{children:"Registration Successful!"}),Object(y.jsx)("p",{children:"You have successfully registered your account."})]}),Object(y.jsx)(g.a,{color:"blue",onClick:()=>e("/en/posts"),children:"Back to Home"})]})},E=a(28),I=a(200),W=a(195),N=a(85);var H=function(){const[e,t]=i.a.useState([]),[a,s]=i.a.useState({}),[c,n]=i.a.useState(null);return i.a.useEffect((()=>{(async()=>{try{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title"),Object(j.h)(40)),a=await Object(j.f)(e),c=a.docs.map((e=>Object(E.a)({id:e.id},e.data())));t(c),n(a.docs[a.docs.length-1]);const i=c.map((async e=>{const t=Object(j.k)(Object(j.b)(u,"posts",e.id,"songDatas"),Object(j.j)("songName","desc")),a=await Object(j.f)(t);return{postId:e.id,count:a.size}})),l=(await Promise.all(i)).reduce(((e,t)=>{let{postId:a,count:s}=t;return e[a]=s,e}),{});s(l)}catch(e){console.error("Error fetching posts: ",e)}})()}),[]),Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:7,children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(W.a.Group,{children:[Object(y.jsx)(W.a,{children:Object(y.jsx)(W.a.Content,{children:Object(y.jsx)(W.a.Header,{style:{fontSize:"22px",paddingBottom:"10px",paddingTop:"10px"},children:"List of Artists"})})}),e.map((e=>Object(y.jsx)(W.a,{as:f.b,to:"/en/posts/".concat(e.id),children:Object(y.jsxs)(W.a.Content,{children:[Object(y.jsx)(W.a.Header,{style:{fontSize:"13px",paddingTop:"10px"},children:e.title}),Object(y.jsxs)(W.a.Extra,{style:{fontSize:"10px"},children:["\xa0\xa0\xa0",a[e.id]||0," \u66f2"]})]})},e.id)))]}),Object(y.jsx)(N.a,{onEnter:()=>{(async()=>{if(c)try{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title"),Object(j.m)(c),Object(j.h)(40)),a=await Object(j.f)(e),s=a.docs.map((e=>Object(E.a)({id:e.id},e.data())));t((e=>[...e,...s])),n(a.docs[a.docs.length-1])}catch(e){console.error("Error fetching more posts: ",e)}})()}})]})}),Object(y.jsx)(I.a.Column,{width:2})]})})})},A=a(201),D=a(196);var B=function(){const e=Object(l.q)(),[t,a]=i.a.useState(""),[s,c]=i.a.useState(!1),[n,o]=i.a.useState(!1);return Object(y.jsxs)(m.a,{children:[Object(y.jsx)(A.a,{children:"Add Artist"}),Object(y.jsxs)(w.a,{onSubmit:async function(){if(t.trim()){c(!0);try{const s=Object(r.c)().currentUser;if(!s)return void console.error("No authenticated user");await Object(j.a)(Object(j.b)(u,"posts"),{title:t,createdAt:Object(j.l)(),author:{displayName:s.displayName||"",uid:s.uid,email:s.email}}),a(""),c(!1),e("/en/posts")}catch(s){console.error("Error adding document:",s),c(!1)}}else o(!0)},children:[Object(y.jsx)(w.a.Input,{placeholder:"Enter name",value:t,onChange:e=>a(e.target.value)}),Object(y.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:15},children:[Object(y.jsx)(w.a.Button,{color:"teal",loading:s,style:{marginVertical:15,width:50,fontSize:"10px"},children:"Add"}),Object(y.jsx)(w.a.Button,{onClick:()=>e("/en/posts"),style:{marginVertical:15,width:50,fontSize:"10px"},children:"Back"})]})]}),Object(y.jsxs)(D.a,{open:n,onClose:()=>o(!1),children:[Object(y.jsx)(D.a.Header,{children:"Warning"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)("p",{children:"Content is empty"})}),Object(y.jsx)(D.a.Actions,{children:Object(y.jsx)(g.a,{onClick:()=>o(!1),children:"Close"})})]})]})},F=a(194),L=a(197);var U=function(e){var t,a,s;let{user:c}=e;const{postId:n}=Object(l.s)(),[o,d]=i.a.useState({author:{}}),[b,x]=i.a.useState(!1),[O,p]=i.a.useState(!1),[f,v]=i.a.useState(!1),S=()=>v(!1),[C,k]=i.a.useState([]),[z,W]=i.a.useState(""),[N,H]=i.a.useState(""),[B,U]=i.a.useState(""),[R,G]=i.a.useState(""),[P,V]=i.a.useState(""),[T,q]=i.a.useState(""),[M,_]=i.a.useState(""),[K,J]=i.a.useState(window.innerWidth<=768);i.a.useEffect((()=>{const e=()=>J(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const Q=[{key:"C",value:"C",text:"C"},{key:"D",value:"D",text:"D"},{key:"E",value:"E",text:"E"},{key:"F",value:"F",text:"F"},{key:"G",value:"G",text:"G"},{key:"A",value:"A",text:"A"},{key:"B",value:"B",text:"B"}],Y=[{key:"",value:"",text:"Natural"},{key:"b",value:"b",text:"b"},{key:"#",value:"#",text:"#"}],X=[{key:"0",value:"0",text:"0"},{key:"1",value:"1",text:"1"},{key:"2",value:"2",text:"2"},{key:"3",value:"3",text:"3"},{key:"4",value:"4",text:"4"},{key:"5",value:"5",text:"5"},{key:"6",value:"6",text:"6"},{key:"7",value:"7",text:"7"},{key:"8",value:"8",text:"8"},{key:"9",value:"9",text:"9"}],Z=(null===(t=Q[0])||void 0===t?void 0:t.value)||"C",$=(null===(a=Y[0])||void 0===a?void 0:a.value)||"",ee=(null===(s=X[4])||void 0===s?void 0:s.value)||"4";return i.a.useEffect((()=>{(async()=>{const e=Object(j.d)(u,"posts",n),t=await Object(j.e)(e);t.exists()?d(t.data()):console.log("No such document!")})()}),[n]),i.a.useEffect((()=>Object(j.i)(Object(j.k)(Object(j.b)(u,"posts",n,"songDatas"),Object(j.j)("songName")),(e=>{const t=e.docs.map((e=>Object(E.a)({id:e.id},e.data())));k(t)}))),[n]),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:13,children:Object(y.jsxs)(F.a.Group,{children:[Object(y.jsxs)(h.a.Item,{children:[c&&Object(y.jsx)(g.a,{style:{marginVertical:25,width:90,fontSize:"12px"},onClick:()=>p(!O),children:O?"Collapse":"Add Song"}),Object(y.jsx)(A.a,{})]}),O&&Object(y.jsxs)(w.a,{style:{fontSize:"0.8em"},children:[Object(y.jsx)(A.a,{children:"Song Name"}),Object(y.jsx)(w.a.Input,{style:{width:"90%"},value:z,onChange:e=>W(e.target.value),placeholder:"Enter song name"}),Object(y.jsx)(A.a,{children:"Highest Note"}),Object(y.jsxs)(w.a.Group,{children:[Object(y.jsx)(w.a.Select,{options:Q,value:N||Z,onChange:(e,t)=>{let{value:a}=t;return H(a)},style:{minWidth:"60px"}}),Object(y.jsx)(w.a.Select,{options:Y,value:B||$,onChange:(e,t)=>{let{value:a}=t;return U(a)},style:{minWidth:"100px"}}),Object(y.jsx)(w.a.Select,{options:X,value:R||ee,onChange:(e,t)=>{let{value:a}=t;return G(a)},style:{minWidth:"60px"}})]}),Object(y.jsx)(A.a,{children:"Lowest Note"}),Object(y.jsxs)(w.a.Group,{children:[Object(y.jsx)(w.a.Select,{options:Q,value:P||Z,onChange:(e,t)=>{let{value:a}=t;return V(a)},style:{minWidth:"60px"}}),Object(y.jsx)(w.a.Select,{options:Y,value:T||$,onChange:(e,t)=>{let{value:a}=t;return q(a)},style:{minWidth:"100px"}}),Object(y.jsx)(w.a.Select,{options:X,value:M||ee,onChange:(e,t)=>{let{value:a}=t;return _(a)},style:{minWidth:"60px"}})]}),Object(y.jsx)(w.a.Button,{color:"teal",style:{margin:"5px 0",width:75,fontSize:"12px"},onClick:async()=>{if(!z.trim())return void v(!0);x(!0);const e=Object(r.c)();if(!e.currentUser)return void alert("Please log in first");const t="".concat(N||Z).concat(B||$).concat(R||ee),a="".concat(P||Z).concat(T||$).concat(M||ee),s=Object(j.b)(u,"posts/".concat(n,"/songDatas"));await Object(j.a)(s,{songId:crypto.randomUUID(),songName:z,hiNote:t,lowNote:a,createdAt:Object(j.l)(),author:{uid:e.currentUser.uid,displayName:e.currentUser.displayName||""}}),W(""),H(""),U(""),G(""),V(""),q(""),_(""),x(!1)},loading:b,children:"Submit"})]}),Object(y.jsxs)(D.a,{open:f,onClose:S,size:"tiny",children:[Object(y.jsx)(D.a.Header,{children:"Error"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)("p",{children:"Song name cannot be blank, please enter a song name."})}),Object(y.jsx)(D.a.Actions,{children:Object(y.jsx)(g.a,{onClick:S,children:"Back"})})]}),Object(y.jsxs)(A.a,{children:["Artist Name: \xa0\xa0 ",o.title," ",Object(y.jsx)("br",{}),"\xa0\xa0",C.length," \xa0\xa0songs."]}),Object(y.jsxs)(L.a,{children:[Object(y.jsx)(L.a.Header,{children:Object(y.jsxs)(L.a.Row,{children:[Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"1.1em",fontWeight:"bold"},children:K?Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:"Song Title<br>LoNote<br>HiNote"}}):"Song Title"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"Lowest Note"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"Highest Note"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"creator"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px"}})]})}),Object(y.jsx)(L.a.Body,{children:C.map((e=>Object(y.jsxs)(L.a.Row,{children:[Object(y.jsx)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:e.songName}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.8em"},children:[K?"LowNote: ":"",e.lowNote]}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.8em"},children:[K?"HiNote: ":"",e.hiNote]}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.7em"},children:[K?"createdBy:":"by:"," ",e.author.displayName||"newUser"]}),Object(y.jsx)(L.a.Cell,{children:(null===c||void 0===c?void 0:c.uid)===e.author.uid&&Object(y.jsx)(g.a,{style:{minWidth:"1px",fontSize:"0.7em"},color:"red",size:"mini",onClick:()=>(async e=>{if(Object(r.c)().currentUser)try{await Object(j.c)(Object(j.d)(u,"posts/".concat(n,"/songDatas/").concat(e))),alert("Deleted successfully!")}catch(t){console.error("Deletion failed",t),alert("Deletion failed, please try again later")}else alert("Please log in first")})(e.id),children:"Delete"})})]},e.id)))})]})]})}),Object(y.jsx)(I.a.Column,{width:1})]})})})})},R=a(202),G=a(188);function P(e){let{user:t}=e;const[a,s]=i.a.useState(!1),[c,n]=i.a.useState(""),[l,o]=i.a.useState(!1);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(A.a,{size:"small",children:["Username",Object(y.jsx)(g.a,{floated:"right",onClick:()=>{s(!0),n("")},children:"Edit"})]}),Object(y.jsx)(R.a,{vertical:!0,children:(null===t||void 0===t?void 0:t.displayName)||"Unnamed"}),Object(y.jsxs)(D.a,{size:"mini",open:a,children:[Object(y.jsx)(D.a.Header,{children:"Edit Username"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)(G.a,{fluid:!0,placeholder:"Enter new username",value:c,onChange:e=>n(e.target.value)})}),Object(y.jsxs)(D.a.Actions,{children:[Object(y.jsx)(g.a,{onClick:()=>s(!1),children:"Cancel"}),Object(y.jsx)(g.a,{onClick:function(){o(!0),Object(r.i)(t,{displayName:c}).then((()=>{n(""),s(!1),o(!1)})).catch((e=>{console.error("Failed to update name:",e),o(!1)}))},loading:l,children:"Save"})]})]})]})}function V(e){let{user:t}=e;const[a,s]=i.a.useState(!1),[c,n]=i.a.useState(!1),[l,o]=i.a.useState(""),[j,d]=i.a.useState(""),[b,u]=i.a.useState(""),[h,x]=i.a.useState(!1);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(A.a,{size:"small",children:["Password",Object(y.jsx)(g.a,{floated:"right",onClick:()=>{s(!0),o(""),d(""),u(""),x(!1)},children:"Edit"})]}),Object(y.jsx)(R.a,{vertical:!0}),Object(y.jsxs)(D.a,{size:"mini",open:a,children:[Object(y.jsx)(D.a.Header,{children:"Change Password"}),Object(y.jsxs)(D.a.Content,{children:[Object(y.jsx)(A.a,{children:"Current Password"}),Object(y.jsx)(G.a,{fluid:!0,placeholder:"Enter old password",value:l,onChange:e=>o(e.target.value),type:h?"text":"password"}),Object(y.jsx)(A.a,{children:"New Password"}),Object(y.jsx)(G.a,{fluid:!0,placeholder:"Enter new password",value:j,onChange:e=>d(e.target.value),type:h?"text":"password"}),Object(y.jsx)(A.a,{children:"Confirm Password"}),Object(y.jsx)(G.a,{fluid:!0,placeholder:"Confirm new password",value:b,onChange:e=>u(e.target.value),type:h?"text":"password"}),Object(y.jsx)("div",{style:{marginTop:"10px"},children:Object(y.jsx)(G.a,{type:"checkbox",label:"Show password",onChange:()=>x(!h)})})]}),Object(y.jsxs)(D.a.Actions,{children:[Object(y.jsx)(g.a,{onClick:()=>s(!1),children:"Cancel"}),Object(y.jsx)(g.a,{onClick:function(){if(j!==b)return void alert("New password and confirm password do not match");n(!0);const e=Object(r.c)(),a=r.a.credential(t.email,l);Object(r.e)(e.currentUser,a).then((()=>{Object(r.h)(e.currentUser,j).then((()=>{s(!1),o(""),d(""),u(""),n(!1)})).catch((e=>{console.error("Failed to update password:",e),n(!1)}))})).catch((e=>{console.error("Failed to authenticate:",e),n(!1)}))},loading:c,children:"Save"})]})]})]})}var T=function(e){let{user:t}=e;return Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:11,children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(A.a,{children:"Profile"}),Object(y.jsx)(P,{user:t}),Object(y.jsx)(V,{user:t}),Object(y.jsx)(g.a,{color:"pink",as:f.b,to:"/en/posts",style:{marginTop:"5px"},children:"Back"})]})}),Object(y.jsx)(I.a.Column,{width:2})]})})})};var q=function(e){let{user:t}=e;const a=Object(l.o)(),s=Object(l.q)(),c=Object(n.useRef)(null),[i,o]=Object(n.useState)(""),[d,v]=Object(n.useState)([]),[w,S]=Object(n.useState)([]);Object(n.useEffect)((()=>{(async()=>{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title")),t=await Object(j.f)(e),a=await Promise.all(t.docs.map((async e=>{const t=Object(j.b)(u,"posts",e.id,"songDatas"),a=(await Object(j.f)(t)).docs.map((e=>e.data().songName));return{id:e.id,title:e.data().title,songs:a}})));S(a)})()}),[]);const C=e=>{c.current&&!c.current.contains(e.target)&&(o(""),v([]))};return Object(n.useEffect)((()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)})),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(x.a,{item:!0,trigger:Object(y.jsx)(O.a,{name:"globe",size:"large"}),icon:null,options:[{key:"en",value:"en",text:"English"},{key:"zh",value:"zh",text:"\u7e41\u9ad4\u4e2d\u6587"},{key:"jp",value:"jp",text:"\u65e5\u672c\u8a9e"}],onChange:(e,t)=>{let{value:a}=t;"en"===a?s("/en/posts"):"zh"===a?s("/zh/posts"):"jp"===a&&s("/jp/posts")}}),Object(y.jsxs)(h.a.Item,{as:f.b,to:"/zh/posts",children:["AVRWIKI",Object(y.jsx)(O.a,{name:"home"})]}),Object(y.jsx)("div",{ref:c,style:{display:"flex",justifyContent:"center",flexGrow:1},children:Object(y.jsx)(p.a,{placeholder:"Search...",value:i,onSearchChange:(e,t)=>{let{value:a}=t;if(o(a),0===a.length)return void v([]);const s=w.flatMap((e=>[...e.title.toLowerCase().includes(a.toLowerCase())?[{title:e.title,id:e.id}]:[],...e.songs.filter((e=>e.toLowerCase().includes(a.toLowerCase()))).map((t=>({title:"".concat(e.title," - ").concat(t),id:"".concat(e.id,"-").concat(t)})))]));v(s)},results:d,onResultSelect:(e,t)=>{let{result:a}=t;const c=a.id.split("-")[0];s("/zh/posts/".concat(c)),o(""),v([])}})})]}),!t&&Object(y.jsx)(m.a,{style:{padding:"0px 0px 15px 0px",width:"95%",display:"flex",justifyContent:"flex-end"},children:Object(y.jsx)(h.a.Item,{as:f.b,to:"/zh/signin",style:{fontSize:"14px"},children:Object(y.jsx)(g.a,{primary:!0,style:{marginVertical:30,width:75,fontSize:"9px"},children:"\u767b\u5165"})})}),t&&Object(y.jsxs)(m.a,{style:{padding:"0px 0px 15px 0px",width:"95%",display:"flex",justifyContent:"flex-end"},children:["/zh/posts"===a.pathname&&Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{style:{marginVertical:30,width:75,fontSize:"9px"},as:f.b,to:"/zh/new-artist",children:"\u65b0\u589e\u85dd\u8853\u5bb6"})}),Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{color:"violet",style:{marginVertical:30,width:75,fontSize:"9px"},as:f.b,to:"/zh/mysettings",children:"\u5e33\u865f"})}),Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{color:"pink",style:{marginVertical:30,width:75,fontSize:"9px"},onClick:()=>{Object(r.g)(b),s("/zh/posts")},children:"\u767b\u51fa"})})]})]})};var M=function(){const[e,t]=i.a.useState("signin"),[a,s]=i.a.useState(""),[c,n]=i.a.useState(""),[o,j]=i.a.useState(""),[d,u]=i.a.useState(!1),x=Object(l.q)(),[O,p]=i.a.useState(""),[g,f]=i.a.useState(!1),v=i.a.useRef(!0);return i.a.useEffect((()=>(v.current=!0,()=>{v.current=!1})),[]),Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(h.a,{widths:"2",color:"blue",children:[Object(y.jsx)(h.a.Item,{active:"signin"===e,onClick:()=>{p(""),t("signin")},children:"\u767b\u5165"}),Object(y.jsx)(h.a.Item,{active:"register"===e,onClick:()=>{p(""),t("register")},children:"\u8a3b\u518a"})]}),Object(y.jsxs)(w.a,{onSubmit:function(){if(f(!0),"register"===e){if(c!==o)return p("\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4"),void f(!1);Object(r.b)(b,a,c).then((()=>b.signOut())).then((()=>{v.current&&(f(!1),x("/zh/registersuccess"))})).catch((e=>{if(console.error("Error:",e),v.current){switch(e.code){case"auth/email-already-in-use":p("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":p("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":p("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3");break;default:p("\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}f(!1)}}))}else"signin"===e&&Object(r.f)(b,a,c).then((()=>{v.current&&(x("/zh/posts"),f(!1))})).catch((e=>{if(console.error("Error:",e),v.current){switch(e.code){case"auth/invalid-email":p("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/invalid-credential":p("\u4fe1\u7bb1\u6216\u5bc6\u78bc\u932f\u8aa4");break;default:p("\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}f(!1)}}))},children:[Object(y.jsx)(w.a.Input,{label:"\u4fe1\u7bb1",value:a,onChange:e=>s(e.target.value),placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"}),Object(y.jsx)(w.a.Input,{label:"\u5bc6\u78bc",type:d?"text":"password",value:c,onChange:e=>n(e.target.value),placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"}),"register"===e&&Object(y.jsx)(w.a.Input,{label:"\u78ba\u8a8d\u5bc6\u78bc",type:d?"text":"password",value:o,onChange:e=>j(e.target.value),placeholder:"\u8acb\u78ba\u8a8d\u5bc6\u78bc"}),Object(y.jsx)(w.a.Field,{children:Object(y.jsx)(S.a,{label:"\u986f\u793a\u5bc6\u78bc",checked:d,onChange:()=>u(!d)})}),O&&Object(y.jsx)(C.a,{negative:!0,children:O}),Object(y.jsxs)(w.a.Button,{loading:g,children:["signin"===e&&"\u767b\u5165","register"===e&&"\u8a3b\u518a"]})]})]})};var _=function(){const e=Object(l.q)();return Object(y.jsxs)(m.a,{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[Object(y.jsxs)(C.a,{success:!0,children:[Object(y.jsx)(C.a.Header,{children:"\u8a3b\u518a\u6210\u529f!"}),Object(y.jsx)("p",{children:"\u60a8\u5df2\u6210\u529f\u8a3b\u518a\u5e33\u865f\u3002\u73fe\u5728\u60a8\u53ef\u4ee5\u9032\u884c\u767b\u5165\u3002"})]}),Object(y.jsx)(g.a,{color:"blue",onClick:()=>e("/zh/posts"),children:"\u56de\u9996\u9801"})]})};var K=function(){const[e,t]=i.a.useState([]),[a,s]=i.a.useState({}),[c,n]=i.a.useState(null);return i.a.useEffect((()=>{(async()=>{try{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title"),Object(j.h)(40)),a=await Object(j.f)(e),c=a.docs.map((e=>Object(E.a)({id:e.id},e.data())));t(c),n(a.docs[a.docs.length-1]);const i=c.map((async e=>{const t=Object(j.k)(Object(j.b)(u,"posts",e.id,"songDatas"),Object(j.j)("songName","desc")),a=await Object(j.f)(t);return{postId:e.id,count:a.size}})),l=(await Promise.all(i)).reduce(((e,t)=>{let{postId:a,count:s}=t;return e[a]=s,e}),{});s(l)}catch(e){console.error("Error fetching posts: ",e)}})()}),[]),Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:7,children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(W.a.Group,{children:[Object(y.jsx)(W.a,{children:Object(y.jsx)(W.a.Content,{children:Object(y.jsx)(W.a.Header,{style:{fontSize:"22px",paddingBottom:"10px",paddingTop:"10px"},children:"\u85dd\u8853\u5bb6 \u5217\u8868"})})}),e.map((e=>Object(y.jsx)(W.a,{as:f.b,to:"/zh/posts/".concat(e.id),children:Object(y.jsxs)(W.a.Content,{children:[Object(y.jsx)(W.a.Header,{style:{fontSize:"13px",paddingTop:"10px"},children:e.title}),Object(y.jsxs)(W.a.Extra,{style:{fontSize:"10px"},children:["\xa0\xa0\xa0",a[e.id]||0," \u66f2"]})]})},e.id)))]}),Object(y.jsx)(N.a,{onEnter:()=>{(async()=>{if(c)try{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title"),Object(j.m)(c),Object(j.h)(40)),a=await Object(j.f)(e),s=a.docs.map((e=>Object(E.a)({id:e.id},e.data())));t((e=>[...e,...s])),n(a.docs[a.docs.length-1])}catch(e){console.error("Error fetching more posts: ",e)}})()}})]})}),Object(y.jsx)(I.a.Column,{width:2})]})})})};var J=function(){const e=Object(l.q)(),[t,a]=i.a.useState(""),[s,c]=i.a.useState(!1),[n,o]=i.a.useState(!1);return Object(y.jsxs)(m.a,{children:[Object(y.jsx)(A.a,{children:"\u65b0\u589eArtist\u540d\u7a31"}),Object(y.jsxs)(w.a,{onSubmit:async function(){if(t.trim()){c(!0);try{const s=Object(r.c)().currentUser;if(!s)return void console.error("No authenticated user");await Object(j.a)(Object(j.b)(u,"posts"),{title:t,createdAt:Object(j.l)(),author:{displayName:s.displayName||"",uid:s.uid,email:s.email}}),a(""),c(!1),e("/zh/posts")}catch(s){console.error("Error adding document:",s),c(!1)}}else o(!0)},children:[Object(y.jsx)(w.a.Input,{placeholder:"\u8acb\u8f38\u5165\u540d\u7a31",value:t,onChange:e=>a(e.target.value)}),Object(y.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:15},children:[Object(y.jsx)(w.a.Button,{color:"teal",loading:s,style:{marginVertical:15,width:50,fontSize:"10px"},children:"\u65b0\u589e"}),Object(y.jsx)(w.a.Button,{onClick:()=>e("/zh/posts"),style:{marginVertical:15,width:50,fontSize:"10px"},children:"\u8fd4\u56de"})]})]}),Object(y.jsxs)(D.a,{open:n,onClose:()=>o(!1),children:[Object(y.jsx)(D.a.Header,{children:"\u8b66\u544a"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)("p",{children:"\u5167\u6587\u7a7a\u767d"})}),Object(y.jsx)(D.a.Actions,{children:Object(y.jsx)(g.a,{onClick:()=>o(!1),children:"\u95dc\u9589"})})]})]})};var Q=function(e){var t,a,s;let{user:c}=e;const{postId:n}=Object(l.s)(),[o,d]=i.a.useState({author:{}}),[b,x]=i.a.useState(!1),[O,p]=i.a.useState(!1),[f,v]=i.a.useState(!1),S=()=>v(!1),[C,k]=i.a.useState([]),[z,W]=i.a.useState(""),[N,H]=i.a.useState(""),[B,U]=i.a.useState(""),[R,G]=i.a.useState(""),[P,V]=i.a.useState(""),[T,q]=i.a.useState(""),[M,_]=i.a.useState(""),[K,J]=i.a.useState(window.innerWidth<=768);i.a.useEffect((()=>{const e=()=>J(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const Q=[{key:"C",value:"C",text:"C"},{key:"D",value:"D",text:"D"},{key:"E",value:"E",text:"E"},{key:"F",value:"F",text:"F"},{key:"G",value:"G",text:"G"},{key:"A",value:"A",text:"A"},{key:"B",value:"B",text:"B"}],Y=[{key:"",value:"",text:"\u7121\u5347\u964d"},{key:"b",value:"b",text:"b"},{key:"#",value:"#",text:"#"}],X=[{key:"0",value:"0",text:"0"},{key:"1",value:"1",text:"1"},{key:"2",value:"2",text:"2"},{key:"3",value:"3",text:"3"},{key:"4",value:"4",text:"4"},{key:"5",value:"5",text:"5"},{key:"6",value:"6",text:"6"},{key:"7",value:"7",text:"7"},{key:"8",value:"8",text:"8"},{key:"9",value:"9",text:"9"}],Z=(null===(t=Q[0])||void 0===t?void 0:t.value)||"C",$=(null===(a=Y[0])||void 0===a?void 0:a.value)||"",ee=(null===(s=X[4])||void 0===s?void 0:s.value)||"4";return i.a.useEffect((()=>{(async()=>{const e=Object(j.d)(u,"posts",n),t=await Object(j.e)(e);t.exists()?d(t.data()):console.log("No such document!")})()}),[n]),i.a.useEffect((()=>Object(j.i)(Object(j.k)(Object(j.b)(u,"posts",n,"songDatas"),Object(j.j)("songName")),(e=>{const t=e.docs.map((e=>Object(E.a)({id:e.id},e.data())));k(t)}))),[n]),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:13,children:Object(y.jsxs)(F.a.Group,{children:[Object(y.jsxs)(h.a.Item,{children:[c&&Object(y.jsx)(g.a,{style:{marginVertical:25,width:90,fontSize:"12px"},onClick:()=>p(!O),children:O?"\u6536\u8d77\u8868\u55ae":"\u65b0\u589e\u6b4c\u66f2"}),Object(y.jsx)(A.a,{})]}),O&&Object(y.jsxs)(w.a,{style:{fontSize:"0.8em"},children:[Object(y.jsx)(A.a,{children:"\u6b4c\u540d"}),Object(y.jsx)(w.a.Input,{style:{width:"90%"},value:z,onChange:e=>W(e.target.value),placeholder:"\u8f38\u5165\u6b4c\u540d"}),Object(y.jsx)(A.a,{children:"\u6700\u9ad8\u97f3"}),Object(y.jsxs)(w.a.Group,{children:[Object(y.jsx)(w.a.Select,{options:Q,value:N||Z,onChange:(e,t)=>{let{value:a}=t;return H(a)},style:{minWidth:"60px"}}),Object(y.jsx)(w.a.Select,{options:Y,value:B||$,onChange:(e,t)=>{let{value:a}=t;return U(a)},style:{minWidth:"100px"}}),Object(y.jsx)(w.a.Select,{options:X,value:R||ee,onChange:(e,t)=>{let{value:a}=t;return G(a)},style:{minWidth:"60px"}})]}),Object(y.jsx)(A.a,{children:"\u6700\u4f4e\u97f3"}),Object(y.jsxs)(w.a.Group,{children:[Object(y.jsx)(w.a.Select,{options:Q,value:P||Z,onChange:(e,t)=>{let{value:a}=t;return V(a)},style:{minWidth:"60px"}}),Object(y.jsx)(w.a.Select,{options:Y,value:T||$,onChange:(e,t)=>{let{value:a}=t;return q(a)},style:{minWidth:"100px"}}),Object(y.jsx)(w.a.Select,{options:X,value:M||ee,onChange:(e,t)=>{let{value:a}=t;return _(a)},style:{minWidth:"60px"}})]}),Object(y.jsx)(w.a.Button,{color:"teal",style:{margin:"5px 0",width:60,fontSize:"12px"},onClick:async()=>{if(!z.trim())return void v(!0);x(!0);const e=Object(r.c)();if(!e.currentUser)return void alert("\u8acb\u5148\u767b\u5165");const t="".concat(N||Z).concat(B||$).concat(R||ee),a="".concat(P||Z).concat(T||$).concat(M||ee),s=Object(j.b)(u,"posts/".concat(n,"/songDatas"));await Object(j.a)(s,{songId:crypto.randomUUID(),songName:z,hiNote:t,lowNote:a,createdAt:Object(j.l)(),author:{uid:e.currentUser.uid,displayName:e.currentUser.displayName||""}}),W(""),H(""),U(""),G(""),V(""),q(""),_(""),x(!1)},loading:b,children:"\u9001\u51fa"})]}),Object(y.jsxs)(D.a,{open:f,onClose:S,size:"tiny",children:[Object(y.jsx)(D.a.Header,{children:"\u932f\u8aa4"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)("p",{children:"\u6b4c\u66f2\u540d\u7a31\u4e0d\u80fd\u70ba\u7a7a\u767d\uff0c\u8acb\u8f38\u5165\u6b4c\u66f2\u540d\u7a31\u3002"})}),Object(y.jsx)(D.a.Actions,{children:Object(y.jsx)(g.a,{onClick:S,children:"\u8fd4\u56de"})})]}),Object(y.jsxs)(A.a,{children:["\u85dd\u8853\u5bb6\u540d\u7a31: \xa0\xa0 ",o.title," ",Object(y.jsx)("br",{}),"\u66f2\u6578\uff1a\xa0",C.length]}),Object(y.jsxs)(L.a,{children:[Object(y.jsx)(L.a.Header,{children:Object(y.jsxs)(L.a.Row,{children:[Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"1.1em",fontWeight:"bold"},children:K?Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:"\u66f2\u540d<br>\u6700\u4f4e\u97f3<br>\u6700\u9ad8\u97f3"}}):"\u66f2\u540d"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"\u6700\u4f4e\u97f3"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"\u6700\u9ad8\u97f3"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"creator"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px"}})]})}),Object(y.jsx)(L.a.Body,{children:C.map((e=>Object(y.jsxs)(L.a.Row,{children:[Object(y.jsx)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:e.songName}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.8em"},children:[K?"LowNote: ":"",e.lowNote]}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.8em"},children:[K?"HiNote: ":"",e.hiNote]}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.7em"},children:[K?"createdBy:":"by:"," ",e.author.displayName||"newUser"]}),Object(y.jsx)(L.a.Cell,{children:(null===c||void 0===c?void 0:c.uid)===e.author.uid&&Object(y.jsx)(g.a,{style:{minWidth:"1px",fontSize:"0.7em"},color:"red",size:"mini",onClick:()=>(async e=>{if(Object(r.c)().currentUser)try{await Object(j.c)(Object(j.d)(u,"posts/".concat(n,"/songDatas/").concat(e))),alert("\u522a\u9664\u6210\u529f\uff01")}catch(t){console.error("\u522a\u9664\u5931\u6557",t),alert("\u522a\u9664\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}else alert("\u8acb\u5148\u767b\u5165")})(e.id),children:"\u522a\u9664"})})]},e.id)))})]})]})}),Object(y.jsx)(I.a.Column,{width:1})]})})})})};function Y(e){let{user:t}=e;const[a,s]=i.a.useState(!1),[c,n]=i.a.useState(""),[l,o]=i.a.useState(!1);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(A.a,{size:"small",children:["\u6703\u54e1\u540d\u7a31",Object(y.jsx)(g.a,{floated:"right",onClick:()=>{s(!0),n("")},children:"\u4fee\u6539"})]}),Object(y.jsx)(R.a,{vertical:!0,children:(null===t||void 0===t?void 0:t.displayName)||"\u7121\u986f\u793a\u540d\u7a31"}),Object(y.jsxs)(D.a,{size:"mini",open:a,children:[Object(y.jsx)(D.a.Header,{children:"\u4fee\u6539\u6703\u54e1\u540d\u7a31"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)(G.a,{fluid:!0,placeholder:"\u8f38\u5165\u65b0\u7684\u6703\u54e1\u540d\u7a31",value:c,onChange:e=>n(e.target.value)})}),Object(y.jsxs)(D.a.Actions,{children:[Object(y.jsx)(g.a,{onClick:()=>s(!1),children:"\u53d6\u6d88"}),Object(y.jsx)(g.a,{onClick:function(){o(!0),Object(r.i)(t,{displayName:c}).then((()=>{n(""),s(!1),o(!1)})).catch((e=>{console.error("\u66f4\u65b0\u540d\u7a31\u5931\u6557:",e),o(!1)}))},loading:l,children:"\u4fee\u6539"})]})]})]})}function X(e){let{user:t}=e;const[a,s]=i.a.useState(!1),[c,n]=i.a.useState(!1),[l,o]=i.a.useState(""),[j,d]=i.a.useState(""),[b,u]=i.a.useState(""),[h,x]=i.a.useState(!1);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(A.a,{size:"small",children:["\u6703\u54e1\u5bc6\u78bc",Object(y.jsx)(g.a,{floated:"right",onClick:()=>{s(!0),o(""),d(""),u(""),x(!1)},children:"\u4fee\u6539"})]}),Object(y.jsx)(R.a,{vertical:!0}),Object(y.jsxs)(D.a,{size:"mini",open:a,children:[Object(y.jsx)(D.a.Header,{children:"\u4fee\u6539\u5bc6\u78bc"}),Object(y.jsxs)(D.a.Content,{children:[Object(y.jsx)(A.a,{children:"\u76ee\u524d\u5bc6\u78bc"}),Object(y.jsx)(G.a,{fluid:!0,placeholder:"\u8f38\u5165\u820a\u5bc6\u78bc",value:l,onChange:e=>o(e.target.value),type:h?"text":"password"}),Object(y.jsx)(A.a,{children:"\u65b0\u5bc6\u78bc"}),Object(y.jsx)(G.a,{fluid:!0,placeholder:"\u8f38\u5165\u65b0\u5bc6\u78bc",value:j,onChange:e=>d(e.target.value),type:h?"text":"password"}),Object(y.jsx)(A.a,{children:"\u78ba\u8a8d\u5bc6\u78bc"}),Object(y.jsx)(G.a,{fluid:!0,placeholder:"\u78ba\u8a8d\u65b0\u5bc6\u78bc",value:b,onChange:e=>u(e.target.value),type:h?"text":"password"}),Object(y.jsx)("div",{style:{marginTop:"10px"},children:Object(y.jsx)(G.a,{type:"checkbox",label:"\u986f\u793a\u5bc6\u78bc",onChange:()=>x(!h)})})]}),Object(y.jsxs)(D.a.Actions,{children:[Object(y.jsx)(g.a,{onClick:()=>s(!1),children:"\u53d6\u6d88"}),Object(y.jsx)(g.a,{onClick:function(){if(j!==b)return void alert("\u65b0\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u4e0d\u4e00\u81f4");n(!0);const e=Object(r.c)(),a=r.a.credential(t.email,l);Object(r.e)(e.currentUser,a).then((()=>{Object(r.h)(e.currentUser,j).then((()=>{s(!1),o(""),d(""),u(""),n(!1)})).catch((e=>{console.error("\u66f4\u65b0\u5bc6\u78bc\u5931\u6557:",e),n(!1)}))})).catch((e=>{console.error("\u8eab\u4efd\u9a57\u8b49\u5931\u6557:",e),n(!1)}))},loading:c,children:"\u4fee\u6539"})]})]})]})}var Z=function(e){let{user:t}=e;return Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:11,children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(A.a,{children:"\u6703\u54e1\u8cc7\u6599"}),Object(y.jsx)(Y,{user:t}),Object(y.jsx)(X,{user:t}),Object(y.jsx)(g.a,{color:"pink",as:f.b,to:"/zh/posts",style:{marginTop:"5px"},children:"\u8fd4\u56de"})]})}),Object(y.jsx)(I.a.Column,{width:2})]})})})};var $=function(e){let{user:t}=e;const a=Object(l.o)(),s=Object(l.q)(),c=Object(n.useRef)(null),[i,o]=Object(n.useState)(""),[d,v]=Object(n.useState)([]),[w,S]=Object(n.useState)([]);Object(n.useEffect)((()=>{(async()=>{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title")),t=await Object(j.f)(e),a=await Promise.all(t.docs.map((async e=>{const t=Object(j.b)(u,"posts",e.id,"songDatas"),a=(await Object(j.f)(t)).docs.map((e=>e.data().songName));return{id:e.id,title:e.data().title,songs:a}})));S(a)})()}),[]);const C=e=>{c.current&&!c.current.contains(e.target)&&(o(""),v([]))};return Object(n.useEffect)((()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)})),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(x.a,{item:!0,trigger:Object(y.jsx)(O.a,{name:"globe",size:"large"}),icon:null,options:[{key:"en",value:"en",text:"English"},{key:"zh",value:"zh",text:"\u7e41\u9ad4\u4e2d\u6587"},{key:"jp",value:"jp",text:"\u65e5\u672c\u8a9e"}],onChange:(e,t)=>{let{value:a}=t;"en"===a?s("/en/posts"):"zh"===a?s("/zh/posts"):"jp"===a&&s("/jp/posts")}}),Object(y.jsxs)(h.a.Item,{as:f.b,to:"/jp/posts",children:["AVRWIKI",Object(y.jsx)(O.a,{name:"home"})]}),Object(y.jsx)("div",{ref:c,style:{display:"flex",justifyContent:"center",flexGrow:1},children:Object(y.jsx)(p.a,{placeholder:"Search...",value:i,onSearchChange:(e,t)=>{let{value:a}=t;if(o(a),0===a.length)return void v([]);const s=w.flatMap((e=>[...e.title.toLowerCase().includes(a.toLowerCase())?[{title:e.title,id:e.id}]:[],...e.songs.filter((e=>e.toLowerCase().includes(a.toLowerCase()))).map((t=>({title:"".concat(e.title," - ").concat(t),id:"".concat(e.id,"-").concat(t)})))]));v(s)},results:d,onResultSelect:(e,t)=>{let{result:a}=t;const c=a.id.split("-")[0];s("/jp/posts/".concat(c)),o(""),v([])}})})]}),!t&&Object(y.jsx)(m.a,{style:{padding:"0px 0px 15px 0px",width:"95%",display:"flex",justifyContent:"flex-end"},children:Object(y.jsx)(h.a.Item,{as:f.b,to:"/jp/signin",style:{fontSize:"14px"},children:Object(y.jsx)(g.a,{primary:!0,style:{marginVertical:30,width:75,fontSize:"9px"},children:"\u30ed\u30b0\u30a4\u30f3"})})}),t&&Object(y.jsxs)(m.a,{style:{padding:"0px 0px 15px 0px",width:"95%",display:"flex",justifyContent:"flex-end"},children:["/jp/posts"===a.pathname&&Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{style:{marginVertical:30,width:100,fontSize:"9px"},as:f.b,to:"/jp/new-artist",children:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8\u8ffd\u52a0"})}),Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{color:"violet",style:{marginVertical:30,width:75,fontSize:"9px"},as:f.b,to:"/jp/mysettings",children:"\u30a2\u30ab\u30a6\u30f3\u30c8"})}),Object(y.jsx)(h.a.Item,{children:Object(y.jsx)(g.a,{color:"pink",style:{marginVertical:30,width:75,fontSize:"9px"},onClick:()=>{Object(r.g)(b),s("/jp/posts")},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})})]})]})};var ee=function(){const[e,t]=i.a.useState("signin"),[a,s]=i.a.useState(""),[c,n]=i.a.useState(""),[o,j]=i.a.useState(""),[d,u]=i.a.useState(!1),x=Object(l.q)(),[O,p]=i.a.useState(""),[g,f]=i.a.useState(!1),v=i.a.useRef(!0);return i.a.useEffect((()=>(v.current=!0,()=>{v.current=!1})),[]),Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(h.a,{widths:"2",color:"blue",children:[Object(y.jsx)(h.a.Item,{active:"signin"===e,onClick:()=>{p(""),t("signin")},children:"\u30ed\u30b0\u30a4\u30f3"}),Object(y.jsx)(h.a.Item,{active:"register"===e,onClick:()=>{p(""),t("register")},children:"\u65b0\u898f\u767b\u9332"})]}),Object(y.jsxs)(w.a,{onSubmit:function(){if(f(!0),"register"===e){if(c!==o)return p("\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u78ba\u8a8d\u7528\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093"),void f(!1);Object(r.b)(b,a,c).then((()=>b.signOut())).then((()=>{v.current&&(f(!1),x("/jp/registersuccess"))})).catch((e=>{if(console.error("Error:",e),v.current){switch(e.code){case"auth/email-already-in-use":p("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u65e2\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u3059");break;case"auth/invalid-email":p("\u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059");break;case"auth/weak-password":p("\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5f31\u3059\u304e\u307e\u3059");break;default:p("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u518d\u8a66\u884c\u3057\u3066\u304f\u3060\u3055\u3044")}f(!1)}}))}else"signin"===e&&Object(r.f)(b,a,c).then((()=>{v.current&&(x("/jp/posts"),f(!1))})).catch((e=>{if(console.error("Error:",e),v.current){switch(e.code){case"auth/invalid-email":p("\u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059");break;case"auth/invalid-credential":p("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059");break;default:p("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u518d\u8a66\u884c\u3057\u3066\u304f\u3060\u3055\u3044")}f(!1)}}))},children:[Object(y.jsx)(w.a.Input,{label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",value:a,onChange:e=>s(e.target.value),placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(y.jsx)(w.a.Input,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9",type:d?"text":"password",value:c,onChange:e=>n(e.target.value),placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),"register"===e&&Object(y.jsx)(w.a.Input,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u78ba\u8a8d\u7528\uff09",type:d?"text":"password",value:o,onChange:e=>j(e.target.value),placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(y.jsx)(w.a.Field,{children:Object(y.jsx)(S.a,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8868\u793a\u3059\u308b",checked:d,onChange:()=>u(!d)})}),O&&Object(y.jsx)(C.a,{negative:!0,children:O}),Object(y.jsxs)(w.a.Button,{loading:g,children:["signin"===e&&"\u30ed\u30b0\u30a4\u30f3","register"===e&&"\u767b\u9332"]})]})]})};var te=function(){const e=Object(l.q)();return Object(y.jsxs)(m.a,{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[Object(y.jsxs)(C.a,{success:!0,children:[Object(y.jsx)(C.a.Header,{children:"\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\uff01"}),Object(y.jsx)("p",{children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\u304c\u6210\u529f\u3057\u307e\u3057\u305f\u3001\u4eca\u3059\u3050\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002"})]}),Object(y.jsx)(g.a,{color:"blue",onClick:()=>e("/jp/posts"),children:"\u30db\u30fc\u30e0\u306b\u623b\u308b"})]})};var ae=function(){const[e,t]=i.a.useState([]),[a,s]=i.a.useState({}),[c,n]=i.a.useState(null);return i.a.useEffect((()=>{(async()=>{try{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title"),Object(j.h)(40)),a=await Object(j.f)(e),c=a.docs.map((e=>Object(E.a)({id:e.id},e.data())));t(c),n(a.docs[a.docs.length-1]);const i=c.map((async e=>{const t=Object(j.k)(Object(j.b)(u,"posts",e.id,"songDatas"),Object(j.j)("songName","desc")),a=await Object(j.f)(t);return{postId:e.id,count:a.size}})),l=(await Promise.all(i)).reduce(((e,t)=>{let{postId:a,count:s}=t;return e[a]=s,e}),{});s(l)}catch(e){console.error("Error fetching posts: ",e)}})()}),[]),Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:7,children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(W.a.Group,{children:[Object(y.jsx)(W.a,{children:Object(y.jsx)(W.a.Content,{children:Object(y.jsx)(W.a.Header,{style:{fontSize:"18px",paddingBottom:"10px",paddingTop:"10px"},children:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8 \u4e00\u89bd"})})}),e.map((e=>Object(y.jsx)(W.a,{as:f.b,to:"/jp/posts/".concat(e.id),children:Object(y.jsxs)(W.a.Content,{children:[Object(y.jsx)(W.a.Header,{style:{fontSize:"13px",paddingTop:"10px"},children:e.title}),Object(y.jsxs)(W.a.Extra,{style:{fontSize:"10px"},children:["\xa0\xa0\xa0",a[e.id]||0," \u66f2"]})]})},e.id)))]}),Object(y.jsx)(N.a,{onEnter:()=>{(async()=>{if(c)try{const e=Object(j.k)(Object(j.b)(u,"posts"),Object(j.j)("title"),Object(j.m)(c),Object(j.h)(40)),a=await Object(j.f)(e),s=a.docs.map((e=>Object(E.a)({id:e.id},e.data())));t((e=>[...e,...s])),n(a.docs[a.docs.length-1])}catch(e){console.error("Error fetching more posts: ",e)}})()}})]})}),Object(y.jsx)(I.a.Column,{width:2})]})})})};var se=function(){const e=Object(l.q)(),[t,a]=i.a.useState(""),[s,c]=i.a.useState(!1),[n,o]=i.a.useState(!1);return Object(y.jsxs)(m.a,{children:[Object(y.jsx)(A.a,{children:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8\u540d"}),Object(y.jsxs)(w.a,{onSubmit:async function(){if(t.trim()){c(!0);try{const s=Object(r.c)().currentUser;if(!s)return void console.error("No authenticated user");await Object(j.a)(Object(j.b)(u,"posts"),{title:t,createdAt:Object(j.l)(),author:{displayName:s.displayName||"",uid:s.uid,email:s.email}}),a(""),c(!1),e("/jp/posts")}catch(s){console.error("Error adding document:",s),c(!1)}}else o(!0)},children:[Object(y.jsx)(w.a.Input,{placeholder:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",value:t,onChange:e=>a(e.target.value)}),Object(y.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:15},children:[Object(y.jsx)(w.a.Button,{color:"teal",loading:s,style:{marginVertical:15,width:50,fontSize:"10px"},children:"\u4fdd\u5b58"}),Object(y.jsx)(w.a.Button,{onClick:()=>e("/jp/posts"),style:{marginVertical:15,width:50,fontSize:"10px"},children:"\u623b\u308b"})]})]}),Object(y.jsxs)(D.a,{open:n,onClose:()=>o(!1),children:[Object(y.jsx)(D.a.Header,{children:"Warning"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)("p",{children:"\u5185\u5bb9\u304c\u7a7a\u3067\u3059"})}),Object(y.jsx)(D.a.Actions,{children:Object(y.jsx)(g.a,{onClick:()=>o(!1),children:"\u623b\u308b"})})]})]})};var ce=function(e){var t,a,s;let{user:c}=e;const{postId:n}=Object(l.s)(),[o,d]=i.a.useState({author:{}}),[b,x]=i.a.useState(!1),[O,p]=i.a.useState(!1),[f,v]=i.a.useState(!1),S=()=>v(!1),[C,k]=i.a.useState([]),[z,W]=i.a.useState(""),[N,H]=i.a.useState(""),[B,U]=i.a.useState(""),[R,G]=i.a.useState(""),[P,V]=i.a.useState(""),[T,q]=i.a.useState(""),[M,_]=i.a.useState(""),[K,J]=i.a.useState(window.innerWidth<=768);i.a.useEffect((()=>{const e=()=>J(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const Q=[{key:"C",value:"C",text:"C"},{key:"D",value:"D",text:"D"},{key:"E",value:"E",text:"E"},{key:"F",value:"F",text:"F"},{key:"G",value:"G",text:"G"},{key:"A",value:"A",text:"A"},{key:"B",value:"B",text:"B"}],Y=[{key:"",value:"",text:"\u539f\u97f3"},{key:"b",value:"b",text:"b"},{key:"#",value:"#",text:"#"}],X=[{key:"0",value:"0",text:"0"},{key:"1",value:"1",text:"1"},{key:"2",value:"2",text:"2"},{key:"3",value:"3",text:"3"},{key:"4",value:"4",text:"4"},{key:"5",value:"5",text:"5"},{key:"6",value:"6",text:"6"},{key:"7",value:"7",text:"7"},{key:"8",value:"8",text:"8"},{key:"9",value:"9",text:"9"}],Z=(null===(t=Q[0])||void 0===t?void 0:t.value)||"C",$=(null===(a=Y[0])||void 0===a?void 0:a.value)||"",ee=(null===(s=X[4])||void 0===s?void 0:s.value)||"4";return i.a.useEffect((()=>{(async()=>{const e=Object(j.d)(u,"posts",n),t=await Object(j.e)(e);t.exists()?d(t.data()):console.log("No such document!")})()}),[n]),i.a.useEffect((()=>Object(j.i)(Object(j.k)(Object(j.b)(u,"posts",n,"songDatas"),Object(j.j)("songName")),(e=>{const t=e.docs.map((e=>Object(E.a)({id:e.id},e.data())));k(t)}))),[n]),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:13,children:Object(y.jsxs)(F.a.Group,{children:[Object(y.jsxs)(h.a.Item,{children:[c&&Object(y.jsx)(g.a,{style:{marginVertical:25,width:100,fontSize:"12px"},onClick:()=>p(!O),children:O?"\u9589\u3058\u308b":"\u66f2\u76ee\u3092\u8ffd\u52a0"}),Object(y.jsx)(A.a,{})]}),O&&Object(y.jsxs)(w.a,{style:{fontSize:"0.8em"},children:[Object(y.jsx)(A.a,{children:"\u66f2\u540d"}),Object(y.jsx)(w.a.Input,{style:{width:"90%"},value:z,onChange:e=>W(e.target.value),placeholder:"\u66f2\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(y.jsx)(A.a,{children:"\u6700\u9ad8\u97f3"}),Object(y.jsxs)(w.a.Group,{children:[Object(y.jsx)(w.a.Select,{options:Q,value:N||Z,onChange:(e,t)=>{let{value:a}=t;return H(a)},style:{minWidth:"60px"}}),Object(y.jsx)(w.a.Select,{options:Y,value:B||$,onChange:(e,t)=>{let{value:a}=t;return U(a)},style:{minWidth:"100px"}}),Object(y.jsx)(w.a.Select,{options:X,value:R||ee,onChange:(e,t)=>{let{value:a}=t;return G(a)},style:{minWidth:"60px"}})]}),Object(y.jsx)(A.a,{children:"\u6700\u4f4e\u97f3"}),Object(y.jsxs)(w.a.Group,{children:[Object(y.jsx)(w.a.Select,{options:Q,value:P||Z,onChange:(e,t)=>{let{value:a}=t;return V(a)},style:{minWidth:"60px"}}),Object(y.jsx)(w.a.Select,{options:Y,value:T||$,onChange:(e,t)=>{let{value:a}=t;return q(a)},style:{minWidth:"100px"}}),Object(y.jsx)(w.a.Select,{options:X,value:M||ee,onChange:(e,t)=>{let{value:a}=t;return _(a)},style:{minWidth:"60px"}})]}),Object(y.jsx)(w.a.Button,{color:"teal",style:{margin:"5px 0",width:60,fontSize:"12px"},onClick:async()=>{if(!z.trim())return void v(!0);x(!0);const e=Object(r.c)();if(!e.currentUser)return void alert("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044");const t="".concat(N||Z).concat(B||$).concat(R||ee),a="".concat(P||Z).concat(T||$).concat(M||ee),s=Object(j.b)(u,"posts/".concat(n,"/songDatas"));await Object(j.a)(s,{songId:crypto.randomUUID(),songName:z,hiNote:t,lowNote:a,createdAt:Object(j.l)(),author:{uid:e.currentUser.uid,displayName:e.currentUser.displayName||""}}),W(""),H(""),U(""),G(""),V(""),q(""),_(""),x(!1)},loading:b,children:"\u4fdd\u5b58"})]}),Object(y.jsxs)(D.a,{open:f,onClose:S,size:"tiny",children:[Object(y.jsx)(D.a.Header,{children:"Warning"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)("p",{children:"\u66f2\u540d\u306f\u7a7a\u767d\u306b\u3067\u304d\u307e\u305b\u3093\u3002\u66f2\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"})}),Object(y.jsx)(D.a.Actions,{children:Object(y.jsx)(g.a,{onClick:S,children:"\u623b\u308b"})})]}),Object(y.jsxs)(A.a,{children:["\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8\u540d: \xa0\xa0 ",o.title," ",Object(y.jsx)("br",{}),"\u66f2\u6570:\xa0",C.length]}),Object(y.jsxs)(L.a,{children:[Object(y.jsx)(L.a.Header,{children:Object(y.jsxs)(L.a.Row,{children:[Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"1.1em",fontWeight:"bold"},children:K?Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:"\u30bf\u30a4\u30c8\u30eb<br>\u6700\u4f4e\u97f3<br>\u6700\u9ad8\u97f3"}}):"\u30bf\u30a4\u30c8\u30eb"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"\u6700\u4f4e\u97f3"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"\u6700\u9ad8\u97f3"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:K?"":"creator"}),Object(y.jsx)(L.a.HeaderCell,{style:{minWidth:"1px"}})]})}),Object(y.jsx)(L.a.Body,{children:C.map((e=>Object(y.jsxs)(L.a.Row,{children:[Object(y.jsx)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.9em",fontWeight:"bold"},children:e.songName}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.8em"},children:[K?"LowNote: ":"",e.lowNote]}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.8em"},children:[K?"HiNote: ":"",e.hiNote]}),Object(y.jsxs)(L.a.Cell,{style:{minWidth:"1px",fontSize:"0.7em"},children:[K?"createdBy:":"by:"," ",e.author.displayName||"newUser"]}),Object(y.jsx)(L.a.Cell,{children:(null===c||void 0===c?void 0:c.uid)===e.author.uid&&Object(y.jsx)(g.a,{style:{minWidth:"1px",fontSize:"0.7em"},color:"red",size:"mini",onClick:()=>(async e=>{if(Object(r.c)().currentUser)try{await Object(j.c)(Object(j.d)(u,"posts/".concat(n,"/songDatas/").concat(e))),alert("\u524a\u9664\u6210\u529f\uff01")}catch(t){console.error("\u524a\u9664\u5931\u6557",t),alert("\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u518d\u8a66\u884c\u3057\u3066\u304f\u3060\u3055\u3044")}else alert("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044")})(e.id),children:"\u524a\u9664"})})]},e.id)))})]})]})}),Object(y.jsx)(I.a.Column,{width:1})]})})})})};function ne(e){let{user:t}=e;const[a,s]=i.a.useState(!1),[c,n]=i.a.useState(""),[l,o]=i.a.useState(!1);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(A.a,{size:"small",children:["\u306a\u307e\u3048\uff0e\u30cb\u30c3\u30af\u30cd\u30fc\u30e0",Object(y.jsx)(g.a,{floated:"right",onClick:()=>{s(!0),n("")},children:"\u5909\u66f4"})]}),Object(y.jsx)(R.a,{vertical:!0,children:(null===t||void 0===t?void 0:t.displayName)||"\u672a\u8a2d\u5b9a"}),Object(y.jsxs)(D.a,{size:"mini",open:a,children:[Object(y.jsx)(D.a.Header,{children:"\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u7de8\u96c6\u3059\u308b"}),Object(y.jsx)(D.a.Content,{children:Object(y.jsx)(G.a,{style:{fontSize:"12px"},fluid:!0,placeholder:"\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",value:c,onChange:e=>n(e.target.value)})}),Object(y.jsxs)(D.a.Actions,{children:[Object(y.jsx)(g.a,{onClick:()=>s(!1),children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),Object(y.jsx)(g.a,{onClick:function(){o(!0),Object(r.i)(t,{displayName:c}).then((()=>{n(""),s(!1),o(!1)})).catch((e=>{console.error("\u66f4\u65b0\u30a8\u30e9\u30fc:",e),o(!1)}))},loading:l,children:"\u4fdd\u5b58"})]})]})]})}function ie(e){let{user:t}=e;const[a,s]=i.a.useState(!1),[c,n]=i.a.useState(!1),[l,o]=i.a.useState(""),[j,d]=i.a.useState(""),[b,u]=i.a.useState(""),[h,x]=i.a.useState(!1);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(A.a,{size:"small",children:["\u30d1\u30b9\u30ef\u30fc\u30c9",Object(y.jsx)(g.a,{floated:"right",onClick:()=>{s(!0),o(""),d(""),u(""),x(!1)},children:"\u5909\u66f4"})]}),Object(y.jsx)(R.a,{vertical:!0}),Object(y.jsxs)(D.a,{size:"mini",open:a,children:[Object(y.jsx)(D.a.Header,{children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4"}),Object(y.jsxs)(D.a.Content,{children:[Object(y.jsx)(A.a,{children:"\u73fe\u5728\u306e\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(y.jsx)(G.a,{fluid:!0,style:{fontSize:"12px"},placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",value:l,onChange:e=>o(e.target.value),type:h?"text":"password"}),Object(y.jsx)(A.a,{children:"\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(y.jsx)(G.a,{fluid:!0,style:{fontSize:"12px"},placeholder:"\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",value:j,onChange:e=>d(e.target.value),type:h?"text":"password"}),Object(y.jsx)(A.a,{children:"\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u78ba\u8a8d\u7528\uff09"}),Object(y.jsx)(G.a,{fluid:!0,style:{fontSize:"12px"},placeholder:"\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",value:b,onChange:e=>u(e.target.value),type:h?"text":"password"}),Object(y.jsx)("div",{style:{marginTop:"10px"},children:Object(y.jsx)(G.a,{type:"checkbox",style:{fontSize:"9px"},label:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8868\u793a\u3059\u308b",onChange:()=>x(!h)})})]}),Object(y.jsxs)(D.a.Actions,{children:[Object(y.jsx)(g.a,{onClick:()=>s(!1),children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),Object(y.jsx)(g.a,{onClick:function(){if(j!==b)return void alert("\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u78ba\u8a8d\u7528\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093");n(!0);const e=Object(r.c)(),a=r.a.credential(t.email,l);Object(r.e)(e.currentUser,a).then((()=>{Object(r.h)(e.currentUser,j).then((()=>{s(!1),o(""),d(""),u(""),n(!1)})).catch((e=>{console.error("\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",e),n(!1)}))})).catch((e=>{console.error("\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",e),n(!1)}))},loading:c,children:"\u4fdd\u5b58"})]})]})]})}var le=function(e){let{user:t}=e;return Object(y.jsx)(m.a,{children:Object(y.jsx)(I.a,{children:Object(y.jsxs)(I.a.Row,{children:[Object(y.jsx)(I.a.Column,{width:2}),Object(y.jsx)(I.a.Column,{width:11,children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(A.a,{children:"\u4f1a\u54e1\u60c5\u5831"}),Object(y.jsx)(ne,{user:t}),Object(y.jsx)(ie,{user:t}),Object(y.jsx)(g.a,{color:"pink",as:f.b,to:"/jp/posts",style:{marginTop:"5px"},children:"\u623b\u308b"})]})}),Object(y.jsx)(I.a.Column,{width:2})]})})})};var re=function(){const[e,t]=Object(n.useState)(null),a=Object(l.o)(),s=Object(l.q)(),c=a.pathname.split("/")[1];return Object(n.useEffect)((()=>{const e=Object(r.d)(b,(e=>{t(e)}));return()=>e()}),[]),Object(n.useEffect)((()=>{["en","zh","jp"].includes(c)?a.pathname==="/".concat(c)&&s("/".concat(c,"/posts"),{replace:!0}):s("/en".concat(a.pathname),{replace:!0})}),[c,s,a.pathname]),Object(y.jsxs)(y.Fragment,{children:[(()=>{switch(c){case"en":default:return Object(y.jsx)(v,{user:e});case"zh":return Object(y.jsx)(q,{user:e});case"jp":return Object(y.jsx)($,{user:e})}})(),Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{path:"/",element:Object(y.jsx)(l.a,{to:"/en/posts"})}),Object(y.jsx)(l.b,{path:"/en",element:Object(y.jsx)(l.a,{to:"/en/posts"})}),Object(y.jsx)(l.b,{path:"/en/posts",element:Object(y.jsx)(H,{})}),Object(y.jsx)(l.b,{path:"/en/signin",element:Object(y.jsx)(k,{})}),Object(y.jsx)(l.b,{path:"/en/registersuccess",element:Object(y.jsx)(z,{user:e})}),Object(y.jsx)(l.b,{path:"/en/new-artist",element:e?Object(y.jsx)(B,{}):Object(y.jsx)(l.a,{to:"/en/posts"})}),Object(y.jsx)(l.b,{path:"/en/posts/:postId",element:Object(y.jsx)(U,{user:e})}),Object(y.jsx)(l.b,{path:"/en/mysettings",element:e?Object(y.jsx)(T,{user:e}):Object(y.jsx)(l.a,{to:"/en/posts"})}),Object(y.jsx)(l.b,{path:"/zh/posts",element:Object(y.jsx)(K,{})}),Object(y.jsx)(l.b,{path:"/zh/signin",element:Object(y.jsx)(M,{})}),Object(y.jsx)(l.b,{path:"/zh/registersuccess",element:Object(y.jsx)(_,{})}),Object(y.jsx)(l.b,{path:"/zh/new-artist",element:e?Object(y.jsx)(J,{}):Object(y.jsx)(l.a,{to:"/zh/posts"})}),Object(y.jsx)(l.b,{path:"/zh/posts/:postId",element:Object(y.jsx)(Q,{user:e})}),Object(y.jsx)(l.b,{path:"/zh/mysettings",element:e?Object(y.jsx)(Z,{user:e}):Object(y.jsx)(l.a,{to:"/zh/posts"})}),Object(y.jsx)(l.b,{path:"/jp/posts",element:Object(y.jsx)(ae,{})}),Object(y.jsx)(l.b,{path:"/jp/signin",element:Object(y.jsx)(ee,{})}),Object(y.jsx)(l.b,{path:"/jp/registersuccess",element:Object(y.jsx)(te,{user:e})}),Object(y.jsx)(l.b,{path:"/jp/new-artist",element:e?Object(y.jsx)(se,{}):Object(y.jsx)(l.a,{to:"/jp/posts"})}),Object(y.jsx)(l.b,{path:"/jp/posts/:postId",element:Object(y.jsx)(ce,{user:e})}),Object(y.jsx)(l.b,{path:"/jp/mysettings",element:e?Object(y.jsx)(le,{user:e}):Object(y.jsx)(l.a,{to:"/jp/posts"})})]})]})};c.a.render(Object(y.jsx)(f.a,{children:Object(y.jsx)(re,{})}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.47b59c0c.chunk.js.map