{"version":3,"sources":["utils/firebase.js","pages/en/HeaderEn.js","pages/en/SigninEn.js","pages/en/RegisterSuccessEn.js","pages/en/PostsEn.js","pages/en/NewArtistEn.js","pages/en/PostEn.js","pages/en/MySettingsEn.js","pages/zh/HeaderZh.js","pages/zh/SigninZh.js","pages/zh/RegisterSuccessZh.js","pages/zh/PostsZh.js","pages/zh/NewArtistZh.js","pages/zh/PostZh.js","pages/zh/MySettingsZh.js","pages/jp/HeaderJp.js","pages/jp/SigninJp.js","pages/jp/RegisterSuccessJp.js","pages/jp/PostsJp.js","pages/jp/NewArtistJp.js","pages/jp/PostJp.js","pages/jp/MySettingsJp.js","App.js","index.js"],"names":["app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","HeaderEn","_ref","user","location","useLocation","navigate","useNavigate","searchRef","useRef","searchQuery","setSearchQuery","useState","searchResults","setSearchResults","posts","setPosts","useEffect","async","postQuery","query","collection","orderBy","querySnapshot","getDocs","postData","Promise","all","docs","map","songQuery","doc","id","songNames","songDoc","data","songName","title","songs","fetchPosts","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","_jsxs","_Fragment","children","Menu","_jsx","Dropdown","item","trigger","Icon","name","size","icon","options","key","value","text","onChange","e","_ref4","Item","as","Link","to","ref","style","display","justifyContent","flexGrow","Search","placeholder","onSearchChange","handleSearchChange","_ref2","filteredResults","flatMap","post","toLowerCase","includes","filter","song","concat","results","onResultSelect","handleResultSelect","_ref3","result","postId","split","Container","padding","width","fontSize","Button","primary","pathname","color","onClick","signOut","SigninEn","activeItem","setActiveItem","React","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","errorMessage","setErrorMessage","isLoading","setIsLoading","isMounted","widths","active","Form","onSubmit","createUserWithEmailAndPassword","then","catch","error","console","code","signInWithEmailAndPassword","Input","label","type","Field","Checkbox","checked","Message","negative","loading","RegisterSuccessEn","flexDirection","alignItems","success","Header","PostsEn","songCounts","setSongCounts","lastVisible","setLastVisible","limit","_objectSpread","length","fetchSongCounts","songSnapshot","count","countMap","reduce","acc","Grid","Row","Column","Group","Content","paddingBottom","paddingTop","Extra","Waypoint","onEnter","startAfter","prevPosts","loadMorePosts","NewArtistEn","setTitle","open","setOpen","trim","currentUser","addDoc","createdAt","serverTimestamp","author","displayName","uid","gap","marginTop","marginVertical","Modal","onClose","Actions","PostEn","_noteOptions$","_sharpOptions$","_octaveOptions$","useParams","setPost","isFormVisible","setIsFormVisible","isModalOpen","setIsModalOpen","handleCloseModal","songDatas","setSongDatas","setSongName","hiNote","setHiNote","hiNoteSharp","setHiNoteSharp","hiNoteOctave","setHiNoteOctave","lowNote","setLowNote","lowNoteSharp","setLowNoteSharp","lowNoteOctave","setLowNoteOctave","isMobile","setIsMobile","window","innerWidth","handleResize","noteOptions","sharpOptions","octaveOptions","defaultNote","defaultSharpOption","defaultOctaveOption","postRef","docSnap","getDoc","exists","log","fetchPost","onSnapshot","collectionSnapshot","Comment","Select","minWidth","_ref5","_ref6","_ref7","margin","alert","hiNoteValue","lowNoteValue","songDataRef","songId","crypto","randomUUID","Table","HeaderCell","fontWeight","dangerouslySetInnerHTML","__html","Body","Cell","deleteDoc","handleDelete","MyName","setDisplayName","floated","handleOpenModal","Segment","vertical","fluid","updateProfile","MyPassword","oldPassword","setOldPassword","newPassword","setNewPassword","isPasswordVisible","setIsPasswordVisible","credential","EmailAuthProvider","reauthenticateWithCredential","updatePassword","MySettingsEn","HeaderZh","SigninZh","RegisterSuccessZh","PostsZh","NewArtistZh","PostZh","MySettingsZh","HeaderJp","SigninJp","RegisterSuccessJp","PostsJp","NewArtistJp","PostJp","MySettingsJp","App","setUser","language","authListener","onAuthStateChanged","replace","renderHeader","Routes","Route","path","element","Navigate","ReactDOM","render","BrowserRouter","getElementById"],"mappings":"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","file":"static/js/main.47b59c0c.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app'; // 使用命名導入\nimport { getAuth } from 'firebase/auth'; // 如果需要使用 Firebase 認證，單獨導入\nimport { getFirestore } from 'firebase/firestore';\nimport { EmailAuthProvider, reauthenticateWithCredential } from 'firebase/auth';\n\nconst firebaseConfig = {\n\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  // measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n\n\n\n};\n\nconst app = initializeApp(firebaseConfig); // 初始化 Firebase 應用\nconst auth = getAuth(app); // 獲取 Firebase 認證\nconst db = getFirestore(app);\n\nexport { db,auth }; // 將 auth 導出，讓其他模塊可以使用\n// export default firebase;","import { auth, db } from '../../utils/firebase';\nimport { signOut } from 'firebase/auth';\nimport { Menu, Dropdown, Search, Icon, Button, Container } from 'semantic-ui-react';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\n\nfunction HeaderEn({ user }) {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const searchRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const postQuery = query(collection(db, \"posts\"), orderBy(\"title\"));\n      const querySnapshot = await getDocs(postQuery);\n      const postData = await Promise.all(querySnapshot.docs.map(async (doc) => {\n        const songQuery = collection(db, \"posts\", doc.id, \"songDatas\");\n        const songSnapshot = await getDocs(songQuery);\n        const songNames = songSnapshot.docs.map(songDoc => songDoc.data().songName);\n        return {\n          id: doc.id,\n          title: doc.data().title,\n          songs: songNames\n        };\n      }));\n      setPosts(postData);\n    };\n    fetchPosts();\n  }, []);\n\n  const handleSearchChange = (e, { value }) => {\n    setSearchQuery(value);\n    if (!value) {\n      setSearchResults([]);\n      return;\n    }\n    const filteredResults = posts.flatMap(post => {\n      const titleMatch = post.title.toLowerCase().includes(value.toLowerCase())\n        ? [{ title: post.title, id: post.id }]\n        : [];\n      const songMatches = post.songs\n        .filter(song => song.toLowerCase().includes(value.toLowerCase()))\n        .map(song => ({ title: `${post.title} - ${song}`, id: `${post.id}-${song}` }));\n      return [...titleMatch, ...songMatches];\n    });\n    setSearchResults(filteredResults);\n  };\n\n  const handleResultSelect = (e, { result }) => {\n    const postId = result.id.split('-')[0];\n    navigate(`/en/posts/${postId}`);\n    setSearchQuery('');\n    setSearchResults([]);\n  };\n\n  const handleClickOutside = (event) => {\n    if (searchRef.current && !searchRef.current.contains(event.target)) {\n      setSearchQuery('');\n      setSearchResults([]);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <>\n      <Menu>\n        <Dropdown\n          item\n          trigger={<Icon name=\"globe\" size=\"large\" />}\n          icon={null}\n          options={[\n            { key: 'en', value: 'en', text: 'English' },\n            { key: 'zh', value: 'zh', text: '繁體中文' },\n            { key: 'jp', value: 'jp', text: '日本語' },\n          ]}\n          onChange={(e, { value }) => {\n            if (value === 'en') {\n              navigate('/en/posts');\n            } else if (value === 'zh') {\n              navigate('/zh/posts');\n            } else if (value === 'jp') {\n              navigate('/jp/posts');\n            }\n          }}\n        />\n\n        <Menu.Item as={Link} to='/en/posts'>\n          AVRWIKI<Icon name='home' />\n        </Menu.Item>\n\n        <div ref={searchRef} style={{ display: 'flex', justifyContent: 'center', flexGrow: 1 }}>\n          <Search\n            placeholder='Search...'\n            value={searchQuery}\n            onSearchChange={handleSearchChange}\n            results={searchResults}\n            onResultSelect={handleResultSelect}\n          />\n        </div>\n      </Menu>\n\n      {!user && (\n        <Container style={{ padding: '0px 0px 15px 0px', width: '95%', display: 'flex', justifyContent: 'flex-end' }}>\n          <Menu.Item as={Link} to='/en/signin' style={{ fontSize: \"14px\" }}>\n            <Button primary style={{ width: 75, fontSize: '9px' }}>\n              Sign In\n            </Button>\n          </Menu.Item>\n        </Container>\n      )}\n\n      {user && (\n        <Container style={{ padding: '0px 0px 15px 0px', width: '95%', display: 'flex', justifyContent: 'flex-end' }}>\n          {location.pathname === '/en/posts' && (\n            <Menu.Item>\n              <Button style={{ width: 75, fontSize: '9px' }} as={Link} to=\"/en/new-artist\">\n                Add Artist\n              </Button>\n            </Menu.Item>\n          )}\n\n          <Menu.Item>\n            <Button color='violet' style={{ width: 75, fontSize: '9px' }} as={Link} to=\"/en/mysettings\">\n              Account\n            </Button>\n          </Menu.Item>\n\n          <Menu.Item>\n            <Button color='pink' style={{ width: 75, fontSize: '9px' }} \n              onClick={() => {\n                signOut(auth);\n                navigate('/en/posts');\n              }}>\n              Sign Out\n            </Button>\n          </Menu.Item>\n        </Container>\n      )}\n    </>\n  );\n}\n\nexport default HeaderEn;\n","import React from \"react\";\nimport { Menu, Form, Container, Checkbox, Message } from \"semantic-ui-react\";\nimport { auth } from \"../../utils/firebase\";\nimport { useNavigate } from \"react-router-dom\";  // 使用 useNavigate 代替 useHistory\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\n\nfunction SigninEn() {\n  const [activeItem, setActiveItem] = React.useState('signin');\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [confirmPassword, setConfirmPassword] = React.useState(''); \n  const [showPassword, setShowPassword] = React.useState(false);\n  const navigate = useNavigate();  // 使用 useNavigate\n  const [errorMessage, setErrorMessage] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const isMounted = React.useRef(true);\n\n  React.useEffect(() => {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n  }, []);\n\n\n  function onSubmit() {\n    setIsLoading(true);\n    if (activeItem === 'register') {\n      if (password !== confirmPassword) { // 檢查密碼是否一致\n        setErrorMessage('Passwords do not match');\n        setIsLoading(false);\n        return;\n      }\n\n      createUserWithEmailAndPassword(auth, email, password)\n\n      .then(() => auth.signOut()) // 立即登出\n\n      .then(() => { \n        if (isMounted.current) {\n          setIsLoading(false);\n          navigate('/en/registersuccess');\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        if (isMounted.current) {\n          switch (error.code) {\n            case 'auth/email-already-in-use':\n              setErrorMessage('Email already exists');\n              break;\n            case 'auth/invalid-email':\n              setErrorMessage('Invalid email format');\n              break;\n            case 'auth/weak-password':\n              setErrorMessage('Password is too weak');\n              break;\n            default:\n              setErrorMessage('An error occurred, please try again later');\n          }\n          setIsLoading(false);\n        }\n      });\n\n    } else if (activeItem === 'signin') {\n\n      signInWithEmailAndPassword(auth, email, password)\n      .then(() => {\n        if (isMounted.current) {\n          navigate('/en/posts');  // 使用 navigate 代替 history.push\n          setIsLoading(false);\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        if (isMounted.current) {\n          switch (error.code) {\n            case 'auth/invalid-email':\n              setErrorMessage('Invalid email format');\n              break;\n            case 'auth/invalid-credential':\n              setErrorMessage('Incorrect email or password');\n              break;\n            default:\n              setErrorMessage('An error occurred, please try again later');\n          }\n          setIsLoading(false);\n        }\n      });\n\n    }\n  }\n\n  return (\n    <Container>\n      <Menu widths='2' color=\"blue\">\n        <Menu.Item active={activeItem === 'signin'} onClick={() => {\n          setErrorMessage('')\n          setActiveItem('signin')}}>\n          Sign in\n        </Menu.Item>\n          \n        <Menu.Item active={activeItem === 'register'} onClick={() => {\n          setErrorMessage('')\n          setActiveItem('register')}}>\n          Register\n        </Menu.Item>\n      </Menu>\n\n      <Form onSubmit={onSubmit}>\n        <Form.Input label='Email' value={email} onChange={(e) => setEmail(e.target.value)} placeholder='Please enter your email' />\n        <Form.Input label='Password' type={showPassword ? 'text' : 'password'} value={password} onChange={(e) => setPassword(e.target.value)} placeholder='Please enter your password' />\n        {activeItem === 'register' && (\n          <Form.Input \n            label='Confirm Password' \n            type={showPassword ? 'text' : 'password'} \n            value={confirmPassword} \n            onChange={(e) => setConfirmPassword(e.target.value)} \n            placeholder='Please confirm your password' \n          />\n        )}\n        <Form.Field>\n          <Checkbox label='Show Password' checked={showPassword} onChange={() => setShowPassword(!showPassword)} />\n        </Form.Field>\n        {errorMessage && <Message negative>{errorMessage}</Message>}\n        <Form.Button loading={isLoading}>\n          {activeItem === 'signin' && 'Sign in'}\n          {activeItem === 'register' && 'Register'}\n        </Form.Button>\n      </Form>\n    </Container>\n  );\n}\n\nexport default SigninEn;\n","import React from \"react\";\nimport { Container, Button, Message } from \"semantic-ui-react\";\nimport { useNavigate } from \"react-router-dom\";  // 使用 useNavigate 代替 useHistory\n\nfunction RegisterSuccessEn() {\n  const navigate = useNavigate();  // 使用 useNavigate\n\n  return (\n    <Container style={{ display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center' }}>\n      <Message success>\n        <Message.Header>Registration Successful!</Message.Header>\n        <p>You have successfully registered your account.</p>\n      </Message>\n\n      <Button color=\"blue\" onClick={() => navigate('/en/posts')}\n        >\n        Back to Home\n      </Button>\n    </Container>\n  );\n}\n\nexport default RegisterSuccessEn;\n","import React from 'react';\nimport { Grid, Item, Container, Header } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { Waypoint } from 'react-waypoint';\nimport { db } from \"../../utils/firebase\";\nimport { collection, getDocs, query, orderBy, limit, startAfter, } from \"firebase/firestore\";\n\nfunction PostsEn() {\n  const [posts, setPosts] = React.useState([]);\n  const [songCounts, setSongCounts] = React.useState({});\n  const [lastVisible, setLastVisible] = React.useState(null);\n\n  React.useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const postQuery = query(collection(db, \"posts\"), orderBy(\"title\"), limit(40));\n        const querySnapshot = await getDocs(postQuery);\n        const data = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        // console.log(data); //查data用\n        setPosts(data); // 設定 posts\n        setLastVisible(querySnapshot.docs[querySnapshot.docs.length - 1]); // 記錄最後一篇文章\n        // 查詢每篇 post 的歌曲數量\n        const fetchSongCounts = data.map(async (post) => {\n          const songQuery = query(\n            collection(db, \"posts\", post.id, \"songDatas\"),\n            orderBy(\"songName\", \"desc\"),\n          );\n          const songSnapshot = await getDocs(songQuery);\n          return { postId: post.id, count: songSnapshot.size };\n        });\n        // 等待所有歌曲數量查詢完成\n        const counts = await Promise.all(fetchSongCounts);\n        const countMap = counts.reduce((acc, { postId, count }) => {\n          acc[postId] = count;\n          return acc;\n        }, {});\n\n        setSongCounts(countMap);\n      } catch (error) {\n        console.error(\"Error fetching posts: \", error);\n      }\n    };\n\n    fetchPosts();\n  }, []);\n\n\n  const loadMorePosts = async () => {\n    if (lastVisible) {\n      try {\n        const postQuery = query(\n          collection(db, \"posts\"),\n          orderBy(\"title\"),\n          startAfter(lastVisible), // 從最後一篇文章後繼續抓取\n          limit(40)\n        );\n        const querySnapshot = await getDocs(postQuery);\n        const data = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        setPosts((prevPosts) => [...prevPosts, ...data]); // 追加資料\n        setLastVisible(querySnapshot.docs[querySnapshot.docs.length - 1]); // 更新最後一篇文章\n      } catch (error) {\n        console.error(\"Error fetching more posts: \", error);\n      }\n    }\n  };\n\n\n  return (\n    <Container>\n      <Grid>\n        <Grid.Row>\n          <Grid.Column width={2}></Grid.Column>\n\n          <Grid.Column width={7}>\n            <>\n\n              <Item.Group>\n                <Item>\n                  <Item.Content>\n                    <Item.Header style={{ fontSize: '22px', paddingBottom: '10px' , paddingTop: '10px' }}>List of Artists</Item.Header>\n                  </Item.Content>\n                </Item>\n\n                {posts.map((post) => (\n                  <Item key={post.id} as={Link} to={`/en/posts/${post.id}`} >\n                    <Item.Content >\n\n                      <Item.Header\n                      style={{ fontSize: '13px', paddingTop: '10px' }}>\n                        {post.title}</Item.Header>\n\n                      <Item.Extra\n                      style={{ fontSize: '10px' }}>\n                        &nbsp;&nbsp;&nbsp;{songCounts[post.id] || 0} 曲</Item.Extra>\n                    </Item.Content>\n                  </Item>\n                ))}\n\n              </Item.Group>\n\n              <Waypoint\n                onEnter={() => {\n                  loadMorePosts();\n                }}\n              />\n\n            </>\n          </Grid.Column>\n\n          <Grid.Column width={2}></Grid.Column>\n\n        </Grid.Row>\n      </Grid>\n    </Container>\n\n  )\n}\n\nexport default PostsEn;","import React from \"react\";\nimport { Container, Header, Form, Modal, Button } from \"semantic-ui-react\";\nimport { db } from \"../../utils/firebase\";\nimport { collection, getDocs, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { useNavigate } from 'react-router-dom';\n\nfunction NewArtistEn() {\n  const navigate = useNavigate();\n  const [title, setTitle] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [open, setOpen] = React.useState(false);  // Control Modal visibility\n  \n  async function onSubmit() {\n    if (!title.trim()) {\n      setOpen(true);  // Show Modal alert\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const auth = getAuth(); // Get current user\n      const user = auth.currentUser;\n      \n      if (!user) {\n        console.error(\"No authenticated user\");\n        return;\n      }\n\n      // Add data to Firebase\n      await addDoc(collection(db, \"posts\"), {\n        title,\n        createdAt: serverTimestamp(),\n        author: {\n          displayName: user.displayName || '',\n          uid: user.uid,\n          email: user.email,\n        }\n      });\n\n      // Update state to re-render the page without refreshing\n      setTitle('');  // Clear input field\n      setIsLoading(false);\n      navigate('/en/posts');  // Navigate to another page\n    } catch (error) {\n      console.error(\"Error adding document:\", error);\n      setIsLoading(false);  // End loading state on error\n    }\n  }\n\n  return (\n    <Container>\n      <Header>Add Artist</Header>\n      <Form onSubmit={onSubmit}>\n        <Form.Input\n          placeholder=\"Enter name\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        \n        <div style={{ display: 'flex', gap: '10px', marginTop: 15 }}>\n          <Form.Button\n            color=\"teal\"\n            loading={isLoading}\n            style={{\n              marginVertical: 15, width: 50,\n              fontSize: '10px',\n            }}\n          >\n            Add\n          </Form.Button>\n\n          <Form.Button\n            onClick={() => navigate('/en/posts')}\n            style={{\n              marginVertical: 15, width: 50,\n              fontSize: '10px',\n            }}\n          >\n            Back\n          </Form.Button>\n        </div>\n      </Form>\n\n      {/* Modal alert */}\n      <Modal open={open} onClose={() => setOpen(false)}>\n        <Modal.Header>Warning</Modal.Header>\n        <Modal.Content>\n          <p>Content is empty</p>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={() => setOpen(false)}>Close</Button>\n        </Modal.Actions>\n      </Modal>\n    </Container>\n  );\n}\n\nexport default NewArtistEn;\n","import React from 'react';\nimport { Grid, Item, Container, Header, Comment, Form, Button, Menu, Modal, Table, } from 'semantic-ui-react';\nimport { useParams } from 'react-router-dom';\nimport { db } from \"../../utils/firebase\";\nimport { deleteDoc, collection, getDoc, doc, addDoc, serverTimestamp, onSnapshot, query, orderBy } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\nfunction PostEn({ user }) {\n  const { postId } = useParams();\n  const [post, setPost] = React.useState({ author: {} });\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isFormVisible, setIsFormVisible] = React.useState(false);\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const handleOpenModal = () => setIsModalOpen(true);\n  const handleCloseModal = () => setIsModalOpen(false);\n  const [songDatas, setSongDatas] = React.useState([]);\n  const [songName, setSongName] = React.useState('');\n  const [hiNote, setHiNote] = React.useState('');\n  const [hiNoteSharp, setHiNoteSharp] = React.useState('');\n  const [hiNoteOctave, setHiNoteOctave] = React.useState('');\n  const [lowNote, setLowNote] = React.useState('');\n  const [lowNoteSharp, setLowNoteSharp] = React.useState('');\n  const [lowNoteOctave, setLowNoteOctave] = React.useState('');\n  const [isMobile, setIsMobile] = React.useState(window.innerWidth <= 768);\n\n  React.useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth <= 768);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleDelete = async (songId) => {\n    const auth = getAuth();\n    if (!auth.currentUser) {\n      alert(\"Please log in first\");\n      return;\n    }\n    try {\n      await deleteDoc(doc(db, `posts/${postId}/songDatas/${songId}`));\n      alert(\"Deleted successfully!\");\n    } catch (error) {\n      console.error(\"Deletion failed\", error);\n      alert(\"Deletion failed, please try again later\");\n    }\n  };\n\n  const noteOptions = [\n    { key: 'C', value: 'C', text: 'C' },\n    { key: 'D', value: 'D', text: 'D' },\n    { key: 'E', value: 'E', text: 'E' },\n    { key: 'F', value: 'F', text: 'F' },\n    { key: 'G', value: 'G', text: 'G' },\n    { key: 'A', value: 'A', text: 'A' },\n    { key: 'B', value: 'B', text: 'B' },\n  ];\n  const sharpOptions = [\n    { key: '', value: '', text: 'Natural' },\n    { key: 'b', value: 'b', text: 'b' },\n    { key: '#', value: '#', text: '#' }\n  ];\n  const octaveOptions = [\n    { key: '0', value: '0', text: '0' },\n    { key: '1', value: '1', text: '1' },\n    { key: '2', value: '2', text: '2' },\n    { key: '3', value: '3', text: '3' },\n    { key: '4', value: '4', text: '4' },\n    { key: '5', value: '5', text: '5' },\n    { key: '6', value: '6', text: '6' },\n    { key: '7', value: '7', text: '7' },\n    { key: '8', value: '8', text: '8' },\n    { key: '9', value: '9', text: '9' },\n  ];\n  const defaultNote = noteOptions[0]?.value || 'C';\n  const defaultSharpOption = sharpOptions[0]?.value || '';\n  const defaultOctaveOption = octaveOptions[4]?.value || '4';\n\n  React.useEffect(() => {\n    const fetchPost = async () => {\n      const postRef = doc(db, \"posts\", postId);\n      const docSnap = await getDoc(postRef);\n      if (docSnap.exists()) {\n        setPost(docSnap.data());\n      } else {\n        console.log(\"No such document!\");\n      }\n    };\n    fetchPost();\n  }, [postId]);\n\n  // 獲取歌曲資料\n  React.useEffect(() => {\n    const songList = onSnapshot(\n      query(\n        collection(db, 'posts', postId, 'songDatas'),\n        orderBy(\"songName\",)),\n      (collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        // console.log(data);\n        setSongDatas(data);\n      }\n    );\n    return songList;\n  }, [postId]\n  );\n\n  // 提交新歌曲資料\n  const onSubmit = async () => {\n    if (!songName.trim()) {\n      handleOpenModal();\n      return;\n    }\n\n    setIsLoading(true);\n\n    const auth = getAuth();\n    if (!auth.currentUser) {\n      alert(\"Please log in first\");\n      return;\n    }\n\n    // 組合 note, sharp 和 octave\n    const hiNoteValue = `${hiNote || defaultNote}${hiNoteSharp || defaultSharpOption}${hiNoteOctave || defaultOctaveOption}`;\n    const lowNoteValue = `${lowNote || defaultNote}${lowNoteSharp || defaultSharpOption}${lowNoteOctave || defaultOctaveOption}`;\n\n    // 增加資料\n    const songDataRef = collection(db, `posts/${postId}/songDatas`);\n    await addDoc(songDataRef, {\n      songId: crypto.randomUUID(),\n      songName: songName,\n      hiNote: hiNoteValue,\n      lowNote: lowNoteValue,\n      createdAt: serverTimestamp(),\n      author: {\n        uid: auth.currentUser.uid,\n        displayName: auth.currentUser.displayName || '',\n      }\n    });\n    // //清空輸入框\n    setSongName('');\n    setHiNote('');\n    setHiNoteSharp('');\n    setHiNoteOctave('');\n    setLowNote('');\n    setLowNoteSharp('');\n    setLowNoteOctave('');\n    setIsLoading(false);\n  };\n\n  return (\n\n    <>\n      <Container>\n        <Grid>\n          <Grid.Row>\n\n            <Grid.Column width={2}></Grid.Column>\n\n            <Grid.Column width={13}>\n              <Comment.Group>\n                <Menu.Item>\n                  {user && (\n                    <Button\n                      style={{ marginVertical: 25, width: 90, fontSize: '12px', }}\n                      onClick={() => setIsFormVisible(!isFormVisible)}\n                    >\n                      {isFormVisible ? \"Collapse\" : \"Add Song\"}\n                    </Button>\n                  )}\n\n                  <Header></Header>\n\n                </Menu.Item>\n\n                {isFormVisible && (\n                  <Form style={{ fontSize: '0.8em' }}>\n\n                    <Header>Song Name</Header>\n                    <Form.Input\n                      style={{ width: '90%' }}\n                      value={songName}\n                      onChange={(e) => setSongName(e.target.value)}\n                      placeholder=\"Enter song name\" />\n\n                    <Header>Highest Note</Header>\n                    <Form.Group>\n                      <Form.Select\n                        options={noteOptions}\n                        value={hiNote || defaultNote}\n                        onChange={(e, { value }) => setHiNote(value)}\n                        style={{ minWidth: '60px', }}\n                      />\n                      <Form.Select\n                        options={sharpOptions}\n                        value={hiNoteSharp || defaultSharpOption}\n                        onChange={(e, { value }) => setHiNoteSharp(value)}\n                        style={{ minWidth: '100px', }}\n                      />\n                      <Form.Select\n                        options={octaveOptions}\n                        value={hiNoteOctave || defaultOctaveOption}\n                        onChange={(e, { value }) => setHiNoteOctave(value)}\n                        style={{ minWidth: '60px', }}\n                      />\n                    </Form.Group>\n\n                    <Header>Lowest Note</Header>\n                    <Form.Group>\n                      <Form.Select\n                        options={noteOptions}\n                        value={lowNote || defaultNote}\n                        onChange={(e, { value }) => setLowNote(value)}\n                        style={{ minWidth: '60px', }}\n                      />\n                      <Form.Select\n                        options={sharpOptions}\n                        value={lowNoteSharp || defaultSharpOption}\n                        onChange={(e, { value }) => setLowNoteSharp(value)}\n                        style={{ minWidth: '100px', }}\n                      />\n                      <Form.Select\n                        options={octaveOptions}\n                        value={lowNoteOctave || defaultOctaveOption}\n                        onChange={(e, { value }) => setLowNoteOctave(value)}\n                        style={{ minWidth: '60px', }}\n                      />\n                    </Form.Group>\n\n                    <Form.Button\n                      color='teal'\n                      style={{ margin: \"5px 0\", width: 75, fontSize: '12px' }}\n                      onClick={onSubmit} loading={isLoading}>\n                      Submit\n                    </Form.Button>\n\n                  </Form>\n                )}\n\n                <Modal open={isModalOpen} onClose={handleCloseModal} size=\"tiny\">\n                  <Modal.Header>Error</Modal.Header>\n                  <Modal.Content>\n                    <p>Song name cannot be blank, please enter a song name.</p>\n                  </Modal.Content>\n                  <Modal.Actions>\n                    <Button onClick={handleCloseModal}>\n                      Back\n                    </Button>\n                  </Modal.Actions>\n                </Modal>\n\n\n                <Header>\n                  Artist Name: &nbsp;&nbsp; {post.title} <br />\n                  &nbsp;&nbsp;{songDatas.length} &nbsp;&nbsp;songs.\n                </Header>\n\n                <Table>\n                  <Table.Header>\n                    <Table.Row>\n                      <Table.HeaderCell style={{ minWidth: '1px', fontSize: '1.1em', fontWeight: 'bold' }}>\n                        {isMobile ? (\n                          <div dangerouslySetInnerHTML={{ __html: 'Song Title<br>LoNote<br>HiNote' }} />\n                        ) : ('Song Title')}\n                      </Table.HeaderCell>\n\n                      <Table.HeaderCell style={{ minWidth: '1px', fontSize: '0.9em', fontWeight: 'bold' }}>{isMobile ? '' : 'Lowest Note'}</Table.HeaderCell>\n                      <Table.HeaderCell style={{ minWidth: '1px', fontSize: '0.9em', fontWeight: 'bold' }}>{isMobile ? '' : 'Highest Note'}</Table.HeaderCell>\n                      <Table.HeaderCell style={{ minWidth: '1px', fontSize: '0.9em', fontWeight: 'bold' }}>{isMobile ? '' : 'creator'}</Table.HeaderCell>\n                      <Table.HeaderCell style={{ minWidth: '1px' }}></Table.HeaderCell>\n                    </Table.Row>\n                  </Table.Header>\n\n                  <Table.Body>\n                    {songDatas.map((songDatas) => {\n                      return (\n                        <Table.Row key={songDatas.id}>\n                          <Table.Cell style={{ minWidth: '1px', fontSize: '0.9em', fontWeight: 'bold' }}>{songDatas.songName}</Table.Cell>\n                          <Table.Cell style={{ minWidth: '1px', fontSize: '0.8em' }}>{isMobile ? 'LowNote: ' : ''}{songDatas.lowNote}</Table.Cell>\n                          <Table.Cell style={{ minWidth: '1px', fontSize: '0.8em' }}>{isMobile ? 'HiNote: ' : ''}{songDatas.hiNote}</Table.Cell>\n\n                          <Table.Cell style={{ minWidth: '1px', fontSize: '0.7em' }}>\n                            {isMobile ? 'createdBy:' : 'by:'} {songDatas.author.displayName || 'newUser'}\n                          </Table.Cell>\n\n                          <Table.Cell  >\n                            {user?.uid === songDatas.author.uid && (\n                              <Button\n                                style={{ minWidth: '1px', fontSize: '0.7em' }}\n                                color=\"red\" size=\"mini\"\n                                onClick={() => handleDelete(songDatas.id)}\n                              >\n                                Delete\n                              </Button>\n                            )}\n                          </Table.Cell>\n\n                        </Table.Row>\n                      );\n                    })}\n                  </Table.Body>\n                </Table>\n\n\n              </Comment.Group>\n            </Grid.Column>\n\n            <Grid.Column width={1}></Grid.Column>\n\n          </Grid.Row>\n        </Grid>\n      </Container>\n    </>\n  )\n}\n\nexport default PostEn;","import React from 'react';\nimport { Grid, Item, Container, Header, Button, Segment, Modal, Input } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { getAuth, updateProfile, EmailAuthProvider, reauthenticateWithCredential, updatePassword } from \"firebase/auth\";\n\nfunction MyName({ user }) {\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [displayName, setDisplayName] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n    setDisplayName(''); // Clear name field\n  }\n\n  function onSubmit() {\n    setIsLoading(true);\n\n    updateProfile(user, {\n      displayName: displayName,\n    })\n    .then(() => {\n      setDisplayName('');\n      setIsModalOpen(false);\n      setIsLoading(false);\n    })\n    .catch((error) => {\n      console.error(\"Failed to update name:\", error);\n      setIsLoading(false);\n    });\n  }\n\n  return (\n    <>\n      <Header size='small'>\n        Username\n        <Button floated='right' onClick={handleOpenModal}>Edit</Button>\n      </Header>\n      <Segment vertical>{user?.displayName || \"Unnamed\"}</Segment>\n      <Modal size='mini' open={isModalOpen}>\n        <Modal.Header>Edit Username</Modal.Header>\n        <Modal.Content>\n          <Input\n            fluid\n            placeholder='Enter new username' \n            value={displayName} \n            onChange={(e) => setDisplayName(e.target.value)}\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={() => setIsModalOpen(false)}>Cancel</Button>\n          <Button onClick={onSubmit} loading={isLoading}>Save</Button>\n        </Modal.Actions>\n      </Modal>\n    </>\n  )\n}\n\nfunction MyPassword({ user }) {\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [oldPassword, setOldPassword] = React.useState('');\n  const [newPassword, setNewPassword] = React.useState('');\n  const [confirmPassword, setConfirmPassword] = React.useState('');\n  const [isPasswordVisible, setIsPasswordVisible] = React.useState(false);\n\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n    setOldPassword(''); // Clear old password field\n    setNewPassword(''); // Clear new password field\n    setConfirmPassword(''); // Clear confirm password field\n    setIsPasswordVisible(false); // Reset password visibility on open\n  }\n\n  function onSubmit() {\n    if (newPassword !== confirmPassword) {\n      alert(\"New password and confirm password do not match\");\n      return;\n    }\n\n    setIsLoading(true);\n    const auth = getAuth();\n    const credential = EmailAuthProvider.credential(user.email, oldPassword); // Use new authentication provider\n\n    reauthenticateWithCredential(auth.currentUser, credential) // Reauthenticate using auth.currentUser\n      .then(() => {\n        updatePassword(auth.currentUser, newPassword) // Update password using auth.currentUser\n          .then(() => {\n            setIsModalOpen(false);\n            setOldPassword('');\n            setNewPassword('');\n            setConfirmPassword('');\n            setIsLoading(false);\n          })\n          .catch((error) => {\n            console.error(\"Failed to update password:\", error);\n            setIsLoading(false);\n          });\n      })\n      .catch((error) => {\n        console.error(\"Failed to authenticate:\", error);\n        setIsLoading(false);\n      });\n  }\n\n  return (\n    <>\n      <Header size='small'>\n        Password\n        <Button floated='right' onClick={handleOpenModal}>Edit</Button>\n      </Header>\n      <Segment vertical></Segment>\n      <Modal size='mini' open={isModalOpen}>\n        <Modal.Header>Change Password</Modal.Header>\n        <Modal.Content>\n          <Header>Current Password</Header>\n          <Input\n            fluid\n            placeholder='Enter old password' \n            value={oldPassword} \n            onChange={(e) => setOldPassword(e.target.value)}\n            type={isPasswordVisible ? 'text' : 'password'}\n          />\n          <Header>New Password</Header>\n          <Input\n            fluid\n            placeholder='Enter new password' \n            value={newPassword} \n            onChange={(e) => setNewPassword(e.target.value)}\n            type={isPasswordVisible ? 'text' : 'password'}\n          />\n          <Header>Confirm Password</Header>\n          <Input\n            fluid\n            placeholder='Confirm new password'\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            type={isPasswordVisible ? 'text' : 'password'}\n          />\n\n          <div style={{ marginTop: '10px' }}>\n            <Input\n              type=\"checkbox\"\n              label=\"Show password\"\n              onChange={() => setIsPasswordVisible(!isPasswordVisible)} // Toggle visibility\n            />\n          </div>\n\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={() => setIsModalOpen(false)}>Cancel</Button>\n          <Button onClick={onSubmit} loading={isLoading}>Save</Button>\n        </Modal.Actions>\n      </Modal>\n    </>\n  )\n}\n\nfunction MySettingsEn({ user }) {\n  return (\n    <Container>\n      <Grid>\n        <Grid.Row>\n          <Grid.Column width={2}></Grid.Column>\n\n          <Grid.Column width={11}>\n            <>\n              <Header>Profile</Header>\n              <MyName user={user} />\n              <MyPassword user={user} />\n              <Button color='pink' as={Link} to='/en/posts' style={{ marginTop: '5px' }}>Back</Button>\n            </>\n          </Grid.Column>\n\n          <Grid.Column width={2}></Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Container>\n  )\n}\n\nexport default MySettingsEn;\n","import { auth, db } from '../../utils/firebase'; // 使用具名匯入 auth\nimport { signOut } from 'firebase/auth';\nimport { Menu, Dropdown, Search, Icon, Button, Container, Grid } from 'semantic-ui-react';\nimport { Link, useLocation, useNavigate, } from 'react-router-dom'; // 引入 useLocation\nimport React, { useRef, useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\n\n\nfunction HeaderZh({ user }) {\n  const location = useLocation();\n  const navigate = useNavigate(); // 改用 useNavigate 來取代 useHistory\n  const searchRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const postQuery = query(collection(db, \"posts\"), orderBy(\"title\"));\n      const querySnapshot = await getDocs(postQuery);\n      const postData = await Promise.all(querySnapshot.docs.map(async (doc) => {\n        const songQuery = collection(db, \"posts\", doc.id, \"songDatas\");\n        const songSnapshot = await getDocs(songQuery);\n        const songNames = songSnapshot.docs.map(songDoc => songDoc.data().songName);\n        return {\n          id: doc.id,\n          title: doc.data().title,\n          songs: songNames\n        };\n      }));\n      setPosts(postData);\n    };\n    fetchPosts();\n  }, []);\n\n  const handleSearchChange = (e, { value }) => {\n    setSearchQuery(value);\n    if (value.length === 0) {\n      setSearchResults([]);\n      return;\n    }\n    const filteredResults = posts.flatMap(post => {\n      const titleMatch = post.title.toLowerCase().includes(value.toLowerCase()) \n        ? [{ title: post.title, id: post.id }] \n        : [];\n      const songMatches = post.songs\n        .filter(song => song.toLowerCase().includes(value.toLowerCase()))\n        .map(song => ({ title: `${post.title} - ${song}`, id: `${post.id}-${song}` })); // 也是使用 `id`\n      return [...titleMatch, ...songMatches];\n    });\n    setSearchResults(filteredResults);\n  };\n\n  const handleResultSelect = (e, { result }) => {\n    const postId = result.id.split('-')[0];\n    navigate(`/zh/posts/${postId}`); // 改用 navigate\n    setSearchQuery('');\n    setSearchResults([]);\n  };\n\n  const handleClickOutside = (event) => {\n    if (searchRef.current && !searchRef.current.contains(event.target)) {\n      setSearchQuery('');\n      setSearchResults([]);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <>\n      <Menu>\n        <Dropdown\n          item\n          trigger={<Icon name=\"globe\" size=\"large\" />}\n          icon={null}\n          options={[\n            { key: 'en', value: 'en', text: 'English' },\n            { key: 'zh', value: 'zh', text: '繁體中文' },\n            { key: 'jp', value: 'jp', text: '日本語' },\n          ]}\n          onChange={(e, { value }) => {\n            if (value === 'en') {\n              navigate('/en/posts');\n            } else if (value === 'zh') {\n              navigate('/zh/posts');\n            } else if (value === 'jp') {\n              navigate('/jp/posts');\n            }\n          }}\n        />\n\n        <Menu.Item as={Link} to='/zh/posts'>\n          AVRWIKI<Icon name='home' />\n        </Menu.Item>\n\n\n        <div ref={searchRef} style={{ display: 'flex', justifyContent: 'center', flexGrow: 1 }}>\n          <Search\n            placeholder='Search...'\n            value={searchQuery}\n            onSearchChange={handleSearchChange}\n            results={searchResults}\n            onResultSelect={handleResultSelect}\n          />\n        </div>\n       \n\n      </Menu>\n\n      {!user && (\n        <Container style={{ padding: '0px 0px 15px 0px', width: '95%', display: 'flex', justifyContent: 'flex-end' }}>\n          <Menu.Item as={Link} to='/zh/signin' style={{ fontSize: \"14px\" }}>\n              <Button primary style={{ marginVertical: 30, width: 75, fontSize: '9px' }}>\n                登入\n              </Button>\n            </Menu.Item>          \n        </Container>\n        )}\n\n      {user && (\n        <Container style={{ padding: '0px 0px 15px 0px', width: '95%', display: 'flex', justifyContent: 'flex-end' }}>\n          {location.pathname === '/zh/posts' && (\n            <Menu.Item>\n              <Button style={{ marginVertical: 30, width: 75, fontSize: '9px' }} as={Link} to=\"/zh/new-artist\">\n                新增藝術家\n              </Button>\n            </Menu.Item>\n          )}\n\n          <Menu.Item >\n            <Button color='violet' style={{ marginVertical: 30, width: 75, fontSize: '9px' }} as={Link} to=\"/zh/mysettings\">\n              帳號\n            </Button>\n          </Menu.Item>\n\n          <Menu.Item >\n            <Button color='pink' style={{ marginVertical: 30, width: 75, fontSize: '9px' }} \n            onClick={() => { signOut(auth); \n            navigate('/zh/posts'); \n            }}>\n              登出\n            </Button>\n          </Menu.Item>\n        </Container>\n      )}\n    </>\n  );\n}\n\nexport default HeaderZh;","import React from \"react\";\nimport { Menu, Form, Container, Checkbox, Message } from \"semantic-ui-react\";\nimport { auth } from \"../../utils/firebase\";\nimport { useNavigate } from \"react-router-dom\";  // 使用 useNavigate 代替 useHistory\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\n\nfunction SigninZh() {\n  const [activeItem, setActiveItem] = React.useState('signin');\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [confirmPassword, setConfirmPassword] = React.useState(''); \n  const [showPassword, setShowPassword] = React.useState(false);\n  const navigate = useNavigate();  // 使用 useNavigate\n  const [errorMessage, setErrorMessage] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const isMounted = React.useRef(true);\n\n  React.useEffect(() => {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n  }, []);\n\n\n  function onSubmit() {\n    setIsLoading(true);\n    if (activeItem === 'register') {\n      if (password !== confirmPassword) { // 檢查密碼是否一致\n        setErrorMessage('密碼與確認密碼不一致');\n        setIsLoading(false);\n        return;\n      }\n\n      createUserWithEmailAndPassword(auth, email, password)\n\n      .then(() => auth.signOut()) // 立即登出\n\n      .then(() => { \n        if (isMounted.current) {\n          setIsLoading(false);\n          navigate('/zh/registersuccess');\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        if (isMounted.current) {\n          switch (error.code) {\n            case 'auth/email-already-in-use':\n              setErrorMessage('信箱已存在');\n              break;\n            case 'auth/invalid-email':\n              setErrorMessage('信箱格式不正確');\n              break;\n            case 'auth/weak-password':\n              setErrorMessage('密碼強度不足');\n              break;\n            default:\n              setErrorMessage('發生錯誤，請稍後再試');\n          }\n          setIsLoading(false);\n        }\n      });\n\n    } else if (activeItem === 'signin') {\n\n      signInWithEmailAndPassword(auth, email, password)\n      .then(() => {\n        if (isMounted.current) {\n          navigate('/zh/posts');  // 使用 navigate 代替 history.push\n          setIsLoading(false);\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        if (isMounted.current) {\n          switch (error.code) {\n            case 'auth/invalid-email':\n              setErrorMessage('信箱格式不正確');\n              break;\n            case 'auth/invalid-credential':\n              setErrorMessage('信箱或密碼錯誤');\n              break;\n            default:\n              setErrorMessage('發生錯誤，請稍後再試');\n          }\n          setIsLoading(false);\n        }\n      });\n\n    }\n  }\n\n  return (\n    <Container>\n      <Menu widths='2' color=\"blue\">\n        <Menu.Item active={activeItem === 'signin'} onClick={() => {\n          setErrorMessage('')\n          setActiveItem('signin')}}>\n          登入\n        </Menu.Item>\n          \n        <Menu.Item active={activeItem === 'register'} onClick={() => {\n          setErrorMessage('')\n          setActiveItem('register')}}>\n          註冊\n        </Menu.Item>\n      </Menu>\n\n      <Form onSubmit={onSubmit}>\n        <Form.Input label='信箱' value={email} onChange={(e) => setEmail(e.target.value)} placeholder='請輸入信箱' />\n        <Form.Input label='密碼' type={showPassword ? 'text' : 'password'} value={password} onChange={(e) => setPassword(e.target.value)} placeholder='請輸入密碼' />\n        {activeItem === 'register' && (\n          <Form.Input \n            label='確認密碼' \n            type={showPassword ? 'text' : 'password'} \n            value={confirmPassword} \n            onChange={(e) => setConfirmPassword(e.target.value)} \n            placeholder='請確認密碼' \n          />\n        )}\n        <Form.Field>\n          <Checkbox label='顯示密碼' checked={showPassword} onChange={() => setShowPassword(!showPassword)} />\n        </Form.Field>\n        {errorMessage && <Message negative>{errorMessage}</Message>}\n        <Form.Button loading={isLoading}>\n          {activeItem === 'signin' && '登入'}\n          {activeItem === 'register' && '註冊'}\n        </Form.Button>\n      </Form>\n    </Container>\n  );\n}\n\nexport default SigninZh;\n","import React from \"react\";\nimport { Container, Button, Message } from \"semantic-ui-react\";\nimport { useNavigate } from \"react-router-dom\";  // 使用 useNavigate 代替 useHistory\n\nfunction RegisterSuccessZh() {\n  const navigate = useNavigate();  // 使用 useNavigate\n\n  return (\n    <Container style={{ display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center' }}>\n      <Message success>\n        <Message.Header>註冊成功!</Message.Header>\n        <p>您已成功註冊帳號。現在您可以進行登入。</p>\n      </Message>\n\n      <Button color=\"blue\" onClick={() => navigate('/zh/posts')}> \n        回首頁\n      </Button>\n    </Container>\n  );\n}\n\nexport default RegisterSuccessZh;\n","import React from 'react';\nimport { Grid, Item,Container } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { Waypoint } from 'react-waypoint';\nimport { db } from \"../../utils/firebase\";\nimport { collection, getDocs, query, orderBy, limit, startAfter, } from \"firebase/firestore\";\n\n\nfunction PostsZh(){\n  const [posts, setPosts] = React.useState([]);\n  const [songCounts, setSongCounts] = React.useState({});\n  const [lastVisible, setLastVisible] = React.useState(null);\n\n  React.useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const postQuery = query(collection(db, \"posts\"), orderBy(\"title\"), limit(40));\n        const querySnapshot = await getDocs(postQuery);\n        const data = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        // console.log(data); //查data用\n        setPosts(data); // 設定 posts\n        setLastVisible(querySnapshot.docs[querySnapshot.docs.length - 1]); // 記錄最後一篇文章\n        // 查詢每篇 post 的歌曲數量\n        const fetchSongCounts = data.map(async (post) => {\n          const songQuery = query(\n            collection(db, \"posts\", post.id, \"songDatas\"),\n            orderBy(\"songName\", \"desc\"),\n          );\n          const songSnapshot = await getDocs(songQuery);\n          return { postId: post.id, count: songSnapshot.size };\n        });\n        // 等待所有歌曲數量查詢完成\n        const counts = await Promise.all(fetchSongCounts);\n        const countMap = counts.reduce((acc, { postId, count }) => {\n          acc[postId] = count;\n          return acc;\n        }, {});\n\n        setSongCounts(countMap);\n      } catch (error) {\n        console.error(\"Error fetching posts: \", error);\n      }\n    };\n\n    fetchPosts();\n  }, []);\n\n\n  const loadMorePosts = async () => {\n    if (lastVisible) {\n      try {\n        const postQuery = query(\n          collection(db, \"posts\"),\n          orderBy(\"title\"),\n          startAfter(lastVisible), // 從最後一篇文章後繼續抓取\n          limit(40)\n        );\n        const querySnapshot = await getDocs(postQuery);\n        const data = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        setPosts((prevPosts) => [...prevPosts, ...data]); // 追加資料\n        setLastVisible(querySnapshot.docs[querySnapshot.docs.length - 1]); // 更新最後一篇文章\n      } catch (error) {\n        console.error(\"Error fetching more posts: \", error);\n      }\n    }\n  };\n\n\n  return (\n<Container>\n<Grid>\n<Grid.Row>\n    <Grid.Column width={2}></Grid.Column>\n\n    <Grid.Column width={7}>\n      <>\n\n      <Item.Group>\n        <Item>\n          <Item.Content>\n            <Item.Header style={{ fontSize: '22px', paddingBottom: '10px' , paddingTop: '10px' }}>\n            藝術家 列表</Item.Header>\n          </Item.Content>\n        </Item>\n\n        {posts.map((post) => (\n          <Item key={post.id} as={Link} to={`/zh/posts/${post.id}`} >\n            <Item.Content >\n              <Item.Header\n              style={{ fontSize: '13px', paddingTop: '10px' }} >\n                {post.title}</Item.Header>\n                \n              <Item.Extra \n              style={{ fontSize: '10px' }}\n              >&nbsp;&nbsp;&nbsp;{songCounts[post.id] || 0} 曲</Item.Extra>\n            </Item.Content>\n          </Item>\n        ))}\n\n      </Item.Group>\n\n      <Waypoint \n      onEnter={() => {\n      loadMorePosts(); }} />\n\n      </>\n      \n    </Grid.Column>\n\n    <Grid.Column width={2}></Grid.Column>\n\n</Grid.Row>\n</Grid>\n</Container>\n\n  )\n}\n\nexport default PostsZh;","import React from \"react\";\nimport { Container, Header, Form, Modal, Button } from \"semantic-ui-react\";\nimport { db } from \"../../utils/firebase\";\nimport { collection, getDocs, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { useNavigate } from 'react-router-dom';\n\n// Container可以讓字不碰牆 留白效果\n\nfunction NewArtistZh() {\n  const navigate = useNavigate();\n  const [title, setTitle] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [open, setOpen] = React.useState(false);  // 控制 Modal 顯示\n  \n  async function onSubmit() {\n    if (!title.trim()) {\n      setOpen(true);  // 顯示 Modal 提示\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const auth = getAuth(); // 獲取當前使用者\n      const user = auth.currentUser;\n      \n      if (!user) {\n        console.error(\"No authenticated user\");\n        return;\n      }\n\n      // 新增資料到 Firebase\n      await addDoc(collection(db, \"posts\"), {\n        title,\n        createdAt: serverTimestamp(),\n        author: {\n          displayName: user.displayName || '',\n          uid: user.uid,\n          email: user.email,\n        }\n      });\n\n      // 更新狀態讓畫面重新渲染，無需重新整理頁面\n      setTitle('');  // 清空輸入框\n      setIsLoading(false);\n      navigate('/zh/posts');  // 跳轉到另一個頁面\n    } catch (error) {\n      console.error(\"Error adding document:\", error);\n      setIsLoading(false);  // 在錯誤時結束載入狀態\n    }\n  }\n\n  return (\n    <Container>\n      <Header>新增Artist名稱</Header>\n      <Form onSubmit={onSubmit}>\n        <Form.Input\n          placeholder=\"請輸入名稱\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        \n        <div style={{ display: 'flex', gap: '10px', marginTop: 15 }}>\n          <Form.Button\n            color=\"teal\"\n            loading={isLoading}\n            style={{\n              marginVertical: 15, width: 50,\n              fontSize: '10px',\n            }}\n          >\n            新增\n          </Form.Button>\n\n          <Form.Button\n            onClick={() => navigate('/zh/posts')}\n            style={{\n              marginVertical: 15, width: 50,\n              fontSize: '10px',\n            }}\n          >\n            返回\n          </Form.Button>\n        </div>\n      </Form>\n\n      {/* Modal 提示 */}\n      <Modal open={open} onClose={() => setOpen(false)}>\n        <Modal.Header>警告</Modal.Header>\n        <Modal.Content>\n          <p>內文空白</p>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={() => setOpen(false)}>關閉</Button>\n        </Modal.Actions>\n      </Modal>\n    </Container>\n  );\n}\n\nexport default NewArtistZh;\n","import React from 'react';\nimport { Grid, Item, Container, Header,Comment, Form,Button, Menu, Modal, Table, } from 'semantic-ui-react';\nimport { useParams } from 'react-router-dom';\nimport { db } from \"../../utils/firebase\"; \nimport { deleteDoc, collection, getDoc, doc, addDoc, serverTimestamp, onSnapshot, query, orderBy} from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\n\n\nfunction PostZh({user}) {\n  const {postId} = useParams();\n  const [post, setPost] = React.useState({author:{} });\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isFormVisible, setIsFormVisible] = React.useState(false); // 控制表單顯示\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const handleOpenModal = () => setIsModalOpen(true);\n  const handleCloseModal = () => setIsModalOpen(false);\n  const [songDatas, setSongDatas] = React.useState([]);\n  const [songName, setSongName] = React.useState('');\n  const [hiNote, setHiNote] = React.useState('');\n  const [hiNoteSharp, setHiNoteSharp] = React.useState('');\n  const [hiNoteOctave, setHiNoteOctave] = React.useState('');\n  const [lowNote, setLowNote] = React.useState('');\n  const [lowNoteSharp, setLowNoteSharp] = React.useState('');\n  const [lowNoteOctave, setLowNoteOctave] = React.useState('');\n  const [isMobile, setIsMobile] = React.useState(window.innerWidth <= 768);\n\n  React.useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth <= 768);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleDelete = async (songId) => {\n    const auth = getAuth();\n    if (!auth.currentUser) {\n      alert(\"請先登入\");\n      return;\n    }\n    try {\n      await deleteDoc(doc(db, `posts/${postId}/songDatas/${songId}`));\n      alert(\"刪除成功！\");\n    } catch (error) {\n      console.error(\"刪除失敗\", error);\n      alert(\"刪除失敗，請稍後再試\");\n    }\n  };\n\n  const noteOptions = [\n    { key: 'C', value: 'C', text: 'C' },\n    { key: 'D', value: 'D', text: 'D' },\n    { key: 'E', value: 'E', text: 'E' },\n    { key: 'F', value: 'F', text: 'F' },\n    { key: 'G', value: 'G', text: 'G' },\n    { key: 'A', value: 'A', text: 'A' },\n    { key: 'B', value: 'B', text: 'B' },\n  ];\n  const sharpOptions = [\n    { key: '', value: '', text: '無升降' },\n    { key: 'b', value: 'b', text: 'b' },\n    { key: '#', value: '#', text: '#' }\n  ];\n  const octaveOptions = [\n    { key: '0', value: '0', text: '0' },\n    { key: '1', value: '1', text: '1' },\n    { key: '2', value: '2', text: '2' },\n    { key: '3', value: '3', text: '3' },\n    { key: '4', value: '4', text: '4' },\n    { key: '5', value: '5', text: '5' },\n    { key: '6', value: '6', text: '6' },\n    { key: '7', value: '7', text: '7' },\n    { key: '8', value: '8', text: '8' },\n    { key: '9', value: '9', text: '9' },\n  ];\n  const defaultNote = noteOptions[0]?.value || 'C';\n  const defaultSharpOption = sharpOptions[0]?.value || '';\n  const defaultOctaveOption = octaveOptions[4]?.value || '4';\n\n\n  React.useEffect(() => {\n    const fetchPost = async () => {\n      const postRef = doc(db, \"posts\", postId);\n      const docSnap = await getDoc(postRef);\n      if (docSnap.exists()) {\n        setPost(docSnap.data());\n      } else {\n        console.log(\"No such document!\");\n      }\n    };\n    fetchPost();\n  }, [postId]);\n\n  // 獲取歌曲資料\n  React.useEffect(() => {\n    const songList = onSnapshot(\n      query(\n      collection(db, 'posts', postId, 'songDatas'),\n      orderBy(\"songName\", )),\n      (collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map(doc => ({\n          id: doc.id,  // 把 doc.id 存入\n          ...doc.data()\n        }));\n        // console.log(data);\n        setSongDatas(data);\n      }\n    );\n    return songList; // 清理songlist\n  }, [postId]\n  );\n\n  // 提交新歌曲資料\n  const onSubmit = async () => {\n    if (!songName.trim()) { // 檢查是否為空\n      handleOpenModal();\n      return;\n    }\n\n    setIsLoading(true);\n\n    const auth = getAuth();\n    if (!auth.currentUser) {\n      alert(\"請先登入\");\n      return;\n    }\n\n    // 組合 note, sharp 和 octave\n    const hiNoteValue = `${hiNote || defaultNote}${hiNoteSharp || defaultSharpOption}${hiNoteOctave || defaultOctaveOption}`;\n    const lowNoteValue = `${lowNote || defaultNote}${lowNoteSharp || defaultSharpOption}${lowNoteOctave || defaultOctaveOption}`;\n\n    // 增加資料\n    const songDataRef = collection(db, `posts/${postId}/songDatas`);\n    await addDoc(songDataRef, {\n      songId: crypto.randomUUID(),\n      songName: songName,\n      hiNote: hiNoteValue,\n      lowNote: lowNoteValue,\n      createdAt: serverTimestamp(),\n      author: {\n        uid: auth.currentUser.uid,\n        displayName: auth.currentUser.displayName || '',\n      }\n    });\n    // //清空輸入框\n    setSongName('');\n    setHiNote('');\n    setHiNoteSharp('');\n    setHiNoteOctave('');\n    setLowNote('');\n    setLowNoteSharp('');\n    setLowNoteOctave('');\n    setIsLoading(false);\n  };\n\n  return (\n\n  <>\n  <Container>\n  <Grid>\n  <Grid.Row>\n\n    <Grid.Column width={2}></Grid.Column>\n\n    <Grid.Column width={13}>\n      <Comment.Group>\n\n        <Menu.Item>\n          {user && (\n          <Button\n            style={{ marginVertical: 25, width: 90, fontSize: '12px', }} \n            onClick={() => setIsFormVisible(!isFormVisible)}\n            >\n            {isFormVisible ? \"收起表單\" : \"新增歌曲\"}\n          </Button>\n          )}\n\n          <Header></Header>\n\n\n        </Menu.Item>\n        \n        {isFormVisible && (\n                <Form style={{ fontSize: '0.8em' }}>\n\n                  <Header>歌名</Header>\n                  <Form.Input\n                  style={{ width: '90%' }}\n                  value={songName} \n                  onChange={(e) => setSongName(e.target.value)} \n                  placeholder=\"輸入歌名\"/>\n\n                  <Header>最高音</Header>\n                  <Form.Group>\n                    <Form.Select \n                    options={noteOptions} \n                    value={hiNote || defaultNote} \n                    onChange={(e, { value }) => setHiNote(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                    <Form.Select \n                    options={sharpOptions} \n                    value={hiNoteSharp || defaultSharpOption} \n                    onChange={(e, { value }) => setHiNoteSharp(value)}\n                    style={{minWidth: '100px',}}\n                    />\n                    <Form.Select \n                    options={octaveOptions} \n                    value={hiNoteOctave || defaultOctaveOption} \n                    onChange={(e, { value }) => setHiNoteOctave(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                  </Form.Group>\n\n                  <Header>最低音</Header>\n                  <Form.Group>\n                    <Form.Select \n                    options={noteOptions} \n                    value={lowNote || defaultNote} \n                    onChange={(e, { value }) => setLowNote(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                    <Form.Select \n                    options={sharpOptions} \n                    value={lowNoteSharp || defaultSharpOption} \n                    onChange={(e, { value }) => setLowNoteSharp(value)}\n                    style={{minWidth: '100px',}} \n                    />\n                    <Form.Select \n                    options={octaveOptions} \n                    value={lowNoteOctave || defaultOctaveOption} \n                    onChange={(e, { value }) => setLowNoteOctave(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                  </Form.Group>\n\n                  <Form.Button \n                  color='teal' \n                  style={{ margin: \"5px 0\", width: 60, fontSize: '12px' }} \n                  onClick={onSubmit} loading={isLoading}>\n                  送出\n                  </Form.Button>\n\n                </Form>\n              )}\n\n    <Modal open={isModalOpen} onClose={handleCloseModal} size=\"tiny\">\n    <Modal.Header>錯誤</Modal.Header>\n    <Modal.Content>\n    <p>歌曲名稱不能為空白，請輸入歌曲名稱。</p>\n    </Modal.Content>\n    <Modal.Actions>\n    <Button onClick={handleCloseModal}>\n      返回\n    </Button>\n    </Modal.Actions>\n    </Modal>\n\n\n        <Header>\n        藝術家名稱: &nbsp;&nbsp; {post.title} <br />\n        曲數：&nbsp;{songDatas.length}\n        </Header>\n\n\n<Table>\n  <Table.Header>\n    <Table.Row>\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '1.1em',fontWeight: 'bold' }}>\n        {isMobile ? (\n        <div dangerouslySetInnerHTML={{ __html: '曲名<br>最低音<br>最高音' }} />\n        ) : ('曲名')}\n        </Table.HeaderCell>\n\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{isMobile ? '' : '最低音'}</Table.HeaderCell>\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{isMobile ? '' : '最高音'}</Table.HeaderCell>\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{isMobile ? '' : 'creator'}</Table.HeaderCell>\n      <Table.HeaderCell style={{minWidth: '1px'}}></Table.HeaderCell>\n    </Table.Row>\n  </Table.Header>\n\n  <Table.Body>\n    {songDatas.map((songDatas) => {\n      return (\n        <Table.Row key={songDatas.id}>\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{songDatas.songName}</Table.Cell>\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.8em' }}>{isMobile ? 'LowNote: ' : ''}{songDatas.lowNote}</Table.Cell>\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.8em' }}>{isMobile ? 'HiNote: ' : ''}{songDatas.hiNote}</Table.Cell>\n\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.7em' }}>\n          {isMobile ? 'createdBy:' : 'by:'} {songDatas.author.displayName || 'newUser'}\n            {/* {songDatas.createdAt?.toDate?.().toLocaleDateString() || '日期載入中'} */}\n          </Table.Cell>\n\n\n          \n          <Table.Cell  >\n            {user?.uid === songDatas.author.uid && (\n              <Button\n              style={{ minWidth: '1px', fontSize: '0.7em' }}\n              color=\"red\" size=\"mini\" \n              onClick={() => handleDelete(songDatas.id)}\n              >\n              刪除\n              </Button>\n            )}\n          </Table.Cell>\n          \n        </Table.Row>\n      );\n    })}\n  </Table.Body>\n</Table>\n\n\n\n\n\n\n\n\n\n\n\n\n\n      </Comment.Group>\n    </Grid.Column>\n\n    <Grid.Column width={1}></Grid.Column>\n\n  </Grid.Row>\n  </Grid>\n  </Container>\n  </>\n  )\n}\n\nexport default PostZh;","import React from 'react';\nimport { Grid, Item, Container, Header,Button, Segment, Modal,Input } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { getAuth, updateProfile, EmailAuthProvider, reauthenticateWithCredential, updatePassword } from \"firebase/auth\";\n\nfunction MyName({user}){\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [displayName, setDisplayName] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n    setDisplayName('');  // 清空名稱欄位\n  }\n\n  function onSubmit() {\n    setIsLoading(true);\n\n    updateProfile(user, {\n      displayName: displayName,\n    })\n    .then(()=>{\n    setDisplayName('');\n    setIsModalOpen(false);\n    setIsLoading(false);\n    })\n    .catch((error) => {\n      console.error(\"更新名稱失敗:\", error);\n      setIsLoading(false);\n    });\n  }\n\n  return(\n    <>\n      <Header size='small'>\n        會員名稱\n        <Button floated='right' onClick={handleOpenModal}>修改</Button>\n      </Header>\n      <Segment vertical >{user?.displayName || \"無顯示名稱\"}</Segment>\n      <Modal size='mini' open={isModalOpen}>\n        <Modal.Header>修改會員名稱</Modal.Header>\n        <Modal.Content>\n          <Input\n          fluid\n          placeholder='輸入新的會員名稱' \n          value={displayName} \n          onChange={(e) => setDisplayName(e.target.value)}\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={()=> setIsModalOpen(false)}>取消</Button>\n          <Button onClick={onSubmit} loading={isLoading} >修改</Button>\n        </Modal.Actions>\n      </Modal>\n    </>\n  )\n}\n\nfunction MyPassword({user}){\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [oldPassword, setOldPassword] = React.useState('');\n  const [newPassword, setNewPassword] = React.useState('');\n  const [confirmPassword, setConfirmPassword] = React.useState('');\n  const [isPasswordVisible, setIsPasswordVisible] = React.useState(false);\n\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n    setOldPassword('');  // 清空舊密碼欄位\n    setNewPassword('');   // 清空新密碼欄位\n    setConfirmPassword('');  // 清空確認密碼欄位\n    setIsPasswordVisible(false); // 每次開啟時重設密碼為隱藏\n  }\n\n  function onSubmit() {\n    if (newPassword !== confirmPassword) {\n      alert(\"新密碼與確認密碼不一致\");\n      return;\n    }\n\n    setIsLoading(true);\n    const auth = getAuth();\n    const credential = EmailAuthProvider.credential(user.email, oldPassword); // 使用新的認證提供者\n\n    reauthenticateWithCredential(auth.currentUser, credential) // 使用 auth.currentUser 進行重新驗證\n      .then(() => {\n        updatePassword(auth.currentUser, newPassword) // 使用 auth.currentUser 更新密碼\n          .then(() => {\n            setIsModalOpen(false);\n            setOldPassword('');\n            setNewPassword('');\n            setConfirmPassword('');\n            setIsLoading(false);\n          })\n          .catch((error) => {\n            console.error(\"更新密碼失敗:\", error);\n            setIsLoading(false);\n          });\n      })\n      .catch((error) => {\n        console.error(\"身份驗證失敗:\", error);\n        setIsLoading(false);\n      });\n  }\n\n  return (\n    <>\n      <Header size='small'>\n        會員密碼\n        <Button floated='right' onClick={handleOpenModal}>\n          修改\n          </Button>\n      </Header>\n      <Segment vertical ></Segment>\n      <Modal size='mini' open={isModalOpen}>\n        <Modal.Header>修改密碼</Modal.Header>\n        <Modal.Content>\n          <Header>目前密碼</Header>\n          <Input\n          fluid\n          placeholder='輸入舊密碼' \n          value={oldPassword} \n          onChange={(e) => setOldPassword(e.target.value)}\n          type={isPasswordVisible ? 'text' : 'password'}\n          />\n          <Header>新密碼</Header>\n          <Input\n          fluid\n          placeholder='輸入新密碼' \n          value={newPassword} \n          onChange={(e) => setNewPassword(e.target.value)}\n          type={isPasswordVisible ? 'text' : 'password'}\n          />\n          <Header>確認密碼</Header>\n          <Input\n          fluid\n          placeholder='確認新密碼'\n          value={confirmPassword}\n          onChange={(e) => setConfirmPassword(e.target.value)}\n          type={isPasswordVisible ? 'text' : 'password'}\n          />\n\n          <div style={{ marginTop: '10px' }}>\n            <Input\n              type=\"checkbox\"\n              label=\"顯示密碼\"\n              onChange={() => setIsPasswordVisible(!isPasswordVisible)}  // 切換顯示狀態\n            />\n          </div>\n\n\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={()=> setIsModalOpen(false)}>取消</Button>\n          <Button onClick={onSubmit} loading={isLoading} >修改</Button>\n        </Modal.Actions>\n      </Modal>\n    </>\n  )\n}\n\nfunction MySettingsZh ({user}){\n\n  return (\n    <Container>\n\n    <Grid>\n  <Grid.Row>\n    <Grid.Column width={2}></Grid.Column>\n\n    <Grid.Column width={11}>\n      <>\n      <Header>會員資料</Header>\n      <MyName user={user} />\n      <MyPassword user={user} />\n      <Button color='pink' as={Link} to='/zh/posts' style={{ marginTop: '5px' }} >返回</Button>\n      </>\n\n    </Grid.Column>\n\n    <Grid.Column width={2}></Grid.Column>\n\n  </Grid.Row>\n</Grid>\n\n    </Container>\n\n  )\n}\n\nexport default MySettingsZh;","import { auth, db } from '../../utils/firebase'; // 使用具名匯入 auth\nimport { signOut } from 'firebase/auth';\nimport { Menu, Dropdown, Search, Icon, Button, Container, Grid } from 'semantic-ui-react';\nimport { Link, useLocation, useNavigate, } from 'react-router-dom'; // 引入 useLocation\nimport React, { useRef, useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\n\n\nfunction HeaderJp({ user }) {\n  const location = useLocation();\n  const navigate = useNavigate(); // 改用 useNavigate 來取代 useHistory\n  const searchRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const postQuery = query(collection(db, \"posts\"), orderBy(\"title\"));\n      const querySnapshot = await getDocs(postQuery);\n      const postData = await Promise.all(querySnapshot.docs.map(async (doc) => {\n        const songQuery = collection(db, \"posts\", doc.id, \"songDatas\");\n        const songSnapshot = await getDocs(songQuery);\n        const songNames = songSnapshot.docs.map(songDoc => songDoc.data().songName);\n        return {\n          id: doc.id,\n          title: doc.data().title,\n          songs: songNames\n        };\n      }));\n      setPosts(postData);\n    };\n    fetchPosts();\n  }, []);\n\n  const handleSearchChange = (e, { value }) => {\n    setSearchQuery(value);\n    if (value.length === 0) {\n      setSearchResults([]);\n      return;\n    }\n    const filteredResults = posts.flatMap(post => {\n      const titleMatch = post.title.toLowerCase().includes(value.toLowerCase()) \n        ? [{ title: post.title, id: post.id }] \n        : [];\n      const songMatches = post.songs\n        .filter(song => song.toLowerCase().includes(value.toLowerCase()))\n        .map(song => ({ title: `${post.title} - ${song}`, id: `${post.id}-${song}` })); // 也是使用 `id`\n      return [...titleMatch, ...songMatches];\n    });\n    setSearchResults(filteredResults);\n  };\n\n  const handleResultSelect = (e, { result }) => {\n    const postId = result.id.split('-')[0];\n    navigate(`/jp/posts/${postId}`); // 改用 navigate\n    setSearchQuery('');\n    setSearchResults([]);\n  };\n\n  const handleClickOutside = (event) => {\n    if (searchRef.current && !searchRef.current.contains(event.target)) {\n      setSearchQuery('');\n      setSearchResults([]);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <>\n      <Menu>\n        <Dropdown\n          item\n          trigger={<Icon name=\"globe\" size=\"large\" />}\n          icon={null}\n          options={[\n            { key: 'en', value: 'en', text: 'English' },\n            { key: 'zh', value: 'zh', text: '繁體中文' },\n            { key: 'jp', value: 'jp', text: '日本語' },\n          ]}\n          onChange={(e, { value }) => {\n            if (value === 'en') {\n              navigate('/en/posts');\n            } else if (value === 'zh') {\n              navigate('/zh/posts');\n            } else if (value === 'jp') {\n              navigate('/jp/posts');\n            }\n          }}\n        />\n\n        <Menu.Item as={Link} to='/jp/posts'>\n          AVRWIKI<Icon name='home' />\n        </Menu.Item>\n\n        <div ref={searchRef} style={{ display: 'flex', justifyContent: 'center', flexGrow: 1 }}>\n          <Search\n            placeholder='Search...'\n            value={searchQuery}\n            onSearchChange={handleSearchChange}\n            results={searchResults}\n            onResultSelect={handleResultSelect}\n          />\n        </div>\n\n      </Menu>\n\n      {!user && (\n        <Container style={{ padding: '0px 0px 15px 0px', width: '95%', display: 'flex', justifyContent: 'flex-end' }}>\n          <Menu.Item as={Link} to='/jp/signin' style={{ fontSize: \"14px\" }}>\n              <Button primary style={{ marginVertical: 30, width: 75, fontSize: '9px' }}>\n                ログイン\n              </Button>\n            </Menu.Item>          \n        </Container>\n        )}\n\n      {user && (\n        <Container style={{ padding: '0px 0px 15px 0px', width: '95%', display: 'flex', justifyContent: 'flex-end' }}>\n          {location.pathname === '/jp/posts' && (\n            <Menu.Item>\n              <Button style={{ marginVertical: 30, width: 100, fontSize: '9px' }} as={Link} to=\"/jp/new-artist\">\n              アーティスト追加\n              </Button>\n            </Menu.Item>\n          )}\n\n          <Menu.Item >\n            <Button color='violet' style={{ marginVertical: 30, width: 75, fontSize: '9px' }} as={Link} to=\"/jp/mysettings\">\n              アカウント\n            </Button>\n          </Menu.Item>\n\n          <Menu.Item >\n            <Button color='pink' style={{ marginVertical: 30, width: 75, fontSize: '9px' }} \n            onClick={() => { signOut(auth); \n            navigate('/jp/posts'); \n            }}>\n              ログアウト\n            </Button>\n          </Menu.Item>\n        </Container>\n      )}\n    </>\n  );\n}\n\nexport default HeaderJp;","import React from \"react\";\nimport { Menu, Form, Container, Checkbox, Message } from \"semantic-ui-react\";\nimport { auth } from \"../../utils/firebase\";\nimport { useNavigate } from \"react-router-dom\";  // 使用 useNavigate 代替 useHistory\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\n\nfunction SigninJp() {\n  const [activeItem, setActiveItem] = React.useState('signin');\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [confirmPassword, setConfirmPassword] = React.useState(''); \n  const [showPassword, setShowPassword] = React.useState(false);\n  const navigate = useNavigate();  // 使用 useNavigate\n  const [errorMessage, setErrorMessage] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const isMounted = React.useRef(true);\n\n  React.useEffect(() => {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n  }, []);\n\n\n  function onSubmit() {\n    setIsLoading(true);\n    if (activeItem === 'register') {\n      if (password !== confirmPassword) { // 檢查密碼是否一致\n        setErrorMessage('パスワードと確認用パスワードが一致しません');\n        setIsLoading(false);\n        return;\n      }\n\n      createUserWithEmailAndPassword(auth, email, password)\n\n      .then(() => auth.signOut()) // 立即登出\n\n      .then(() => { \n        if (isMounted.current) {\n          setIsLoading(false);\n          navigate('/jp/registersuccess');\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        if (isMounted.current) {\n          switch (error.code) {\n            case 'auth/email-already-in-use':\n              setErrorMessage('メールアドレスは既に使用されています');\n              break;\n            case 'auth/invalid-email':\n              setErrorMessage('無効なメールアドレスです');\n              break;\n            case 'auth/weak-password':\n              setErrorMessage('パスワードが弱すぎます');\n              break;\n            default:\n              setErrorMessage('エラーが発生しました。後で再試行してください');\n          }\n          setIsLoading(false);\n        }\n      });\n\n    } else if (activeItem === 'signin') {\n\n      signInWithEmailAndPassword(auth, email, password)\n      .then(() => {\n        if (isMounted.current) {\n          navigate('/jp/posts');  // 使用 navigate 代替 history.push\n          setIsLoading(false);\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        if (isMounted.current) {\n          switch (error.code) {\n            case 'auth/invalid-email':\n              setErrorMessage('無効なメールアドレスです');\n              break;\n            case 'auth/invalid-credential':\n              setErrorMessage('メールアドレスまたはパスワードが間違っています');\n              break;\n            default:\n              setErrorMessage('エラーが発生しました。後で再試行してください');\n          }\n          setIsLoading(false);\n        }\n      });\n\n    }\n  }\n\n  return (\n    <Container>\n      <Menu widths='2' color=\"blue\">\n        <Menu.Item active={activeItem === 'signin'} onClick={() => {\n          setErrorMessage('')\n          setActiveItem('signin')}}>\n          ログイン\n        </Menu.Item>\n          \n        <Menu.Item active={activeItem === 'register'} onClick={() => {\n          setErrorMessage('')\n          setActiveItem('register')}}>\n          新規登録\n        </Menu.Item>\n      </Menu>\n\n      <Form onSubmit={onSubmit}>\n        <Form.Input label='メールアドレス' value={email} onChange={(e) => setEmail(e.target.value)} placeholder='メールアドレスを入力してください' />\n        <Form.Input label='パスワード' type={showPassword ? 'text' : 'password'} value={password} onChange={(e) => setPassword(e.target.value)} placeholder='パスワードを入力してください' />\n        {activeItem === 'register' && (\n          <Form.Input \n            label='パスワード（確認用）' \n            type={showPassword ? 'text' : 'password'} \n            value={confirmPassword} \n            onChange={(e) => setConfirmPassword(e.target.value)} \n            placeholder='パスワードを入力してください' \n          />\n        )}\n        <Form.Field>\n          <Checkbox label='パスワードを表示する' checked={showPassword} onChange={() => setShowPassword(!showPassword)} />\n        </Form.Field>\n        {errorMessage && <Message negative>{errorMessage}</Message>}\n        <Form.Button loading={isLoading}>\n          {activeItem === 'signin' && 'ログイン'}\n          {activeItem === 'register' && '登録'}\n        </Form.Button>\n      </Form>\n    </Container>\n  );\n}\n\nexport default SigninJp;\n","import React from \"react\";\nimport { Container, Button, Message } from \"semantic-ui-react\";\nimport { useNavigate } from \"react-router-dom\";  // 使用 useNavigate 代替 useHistory\n\nfunction RegisterSuccessJp() {\n  const navigate = useNavigate();  // 使用 useNavigate\n\n  return (\n    <Container style={{ display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center' }}>\n      <Message success>\n        <Message.Header>登録が完了しました！</Message.Header>\n        <p>アカウントの登録が成功しました、今すぐログインできます。</p>\n      </Message>\n\n      <Button color=\"blue\" onClick={() => navigate('/jp/posts')}> \n        ホームに戻る\n      </Button>\n    </Container>\n  );\n}\n\nexport default RegisterSuccessJp;\n","import React from 'react';\nimport { Grid, Item,Container } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { Waypoint } from 'react-waypoint';\nimport { db } from \"../../utils/firebase\";\nimport { collection, getDocs, query, orderBy, limit, startAfter, } from \"firebase/firestore\";\n\nfunction PostsJp(){\n  const [posts, setPosts] = React.useState([]);\n  const [songCounts, setSongCounts] = React.useState({});\n  const [lastVisible, setLastVisible] = React.useState(null);\n\n  React.useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const postQuery = query(collection(db, \"posts\"), orderBy(\"title\"), limit(40));\n        const querySnapshot = await getDocs(postQuery);\n        const data = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        // console.log(data); //查data用\n        setPosts(data); // 設定 posts\n        setLastVisible(querySnapshot.docs[querySnapshot.docs.length - 1]); // 記錄最後一篇文章\n        // 查詢每篇 post 的歌曲數量\n        const fetchSongCounts = data.map(async (post) => {\n          const songQuery = query(\n            collection(db, \"posts\", post.id, \"songDatas\"),\n            orderBy(\"songName\", \"desc\"),\n          );\n          const songSnapshot = await getDocs(songQuery);\n          return { postId: post.id, count: songSnapshot.size };\n        });\n        // 等待所有歌曲數量查詢完成\n        const counts = await Promise.all(fetchSongCounts);\n        const countMap = counts.reduce((acc, { postId, count }) => {\n          acc[postId] = count;\n          return acc;\n        }, {});\n\n        setSongCounts(countMap);\n      } catch (error) {\n        console.error(\"Error fetching posts: \", error);\n      }\n    };\n\n    fetchPosts();\n  }, []);\n\n\n  const loadMorePosts = async () => {\n    if (lastVisible) {\n      try {\n        const postQuery = query(\n          collection(db, \"posts\"),\n          orderBy(\"title\"),\n          startAfter(lastVisible), // 從最後一篇文章後繼續抓取\n          limit(40)\n        );\n        const querySnapshot = await getDocs(postQuery);\n        const data = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        setPosts((prevPosts) => [...prevPosts, ...data]); // 追加資料\n        setLastVisible(querySnapshot.docs[querySnapshot.docs.length - 1]); // 更新最後一篇文章\n      } catch (error) {\n        console.error(\"Error fetching more posts: \", error);\n      }\n    }\n  };\n\n  return (\n<Container>\n<Grid>\n<Grid.Row>\n    <Grid.Column width={2}></Grid.Column>\n\n    <Grid.Column width={7}>\n      <>\n\n      <Item.Group>\n        <Item>\n          <Item.Content>\n            <Item.Header style={{ fontSize: '18px', paddingBottom: '10px' , paddingTop: '10px' }}>\n            アーティスト 一覽</Item.Header>\n          </Item.Content>\n        </Item>\n\n        {posts.map((post) => (\n          <Item key={post.id} as={Link} to={`/jp/posts/${post.id}`} >\n            <Item.Content >\n              <Item.Header\n              style={{ fontSize: '13px', paddingTop: '10px' }}>\n                {post.title}</Item.Header>\n\n              <Item.Extra\n              style={{ fontSize: '10px' }}>\n              &nbsp;&nbsp;&nbsp;{songCounts[post.id] || 0} 曲</Item.Extra>\n            </Item.Content>\n          </Item>\n        ))}\n\n      </Item.Group>\n\n      <Waypoint \n      onEnter={() => {\n      loadMorePosts(); }}/>\n\n      </>\n    </Grid.Column>\n\n    <Grid.Column width={2}></Grid.Column>\n\n</Grid.Row>\n</Grid>\n</Container>\n\n  )\n}\n\nexport default PostsJp;","import React from \"react\";\nimport { Container, Header, Form, Modal, Button } from \"semantic-ui-react\";\nimport { db } from \"../../utils/firebase\";\nimport { collection, getDocs, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { useNavigate } from 'react-router-dom';\n\nfunction NewArtistJp() {\n  const navigate = useNavigate();\n  const [title, setTitle] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [open, setOpen] = React.useState(false);  // 控制 Modal 顯示\n  \n  async function onSubmit() {\n    if (!title.trim()) {\n      setOpen(true);  // 顯示 Modal 提示\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const auth = getAuth(); // 獲取當前使用者\n      const user = auth.currentUser;\n      \n      if (!user) {\n        console.error(\"No authenticated user\");\n        return;\n      }\n\n      // 新增資料到 Firebase\n      await addDoc(collection(db, \"posts\"), {\n        title,\n        createdAt: serverTimestamp(),\n        author: {\n          displayName: user.displayName || '',\n          uid: user.uid,\n          email: user.email,\n        }\n      });\n\n      // 更新狀態讓畫面重新渲染，無需重新整理頁面\n      setTitle('');  // 清空輸入框\n      setIsLoading(false);\n      navigate('/jp/posts');  // 跳轉到另一個頁面\n    } catch (error) {\n      console.error(\"Error adding document:\", error);\n      setIsLoading(false);  // 在錯誤時結束載入狀態\n    }\n  }\n\n  return (\n    <Container>\n      <Header>アーティスト名</Header>\n      <Form onSubmit={onSubmit}>\n        <Form.Input\n          placeholder=\"アーティスト名を入力してください\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        \n        <div style={{ display: 'flex', gap: '10px', marginTop: 15 }}>\n          <Form.Button\n            color=\"teal\"\n            loading={isLoading}\n            style={{\n              marginVertical: 15, width: 50,\n              fontSize: '10px',\n            }}\n          >\n            保存\n          </Form.Button>\n\n          <Form.Button\n            onClick={() => navigate('/jp/posts')}\n            style={{\n              marginVertical: 15, width: 50,\n              fontSize: '10px',\n            }}\n          >\n            戻る\n          </Form.Button>\n        </div>\n      </Form>\n\n      {/* Modal 提示 */}\n      <Modal open={open} onClose={() => setOpen(false)}>\n        <Modal.Header>Warning</Modal.Header>\n        <Modal.Content>\n          <p>内容が空です</p>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={() => setOpen(false)}>戻る</Button>\n        </Modal.Actions>\n      </Modal>\n    </Container>\n  );\n}\n\nexport default NewArtistJp;\n","import React from 'react';\nimport { Grid, Item, Container, Header,Comment, Form,Button, Menu, Modal, Table, } from 'semantic-ui-react';\nimport { useParams } from 'react-router-dom';\nimport { db } from \"../../utils/firebase\"; \nimport { deleteDoc, collection, getDoc, doc, addDoc, serverTimestamp, onSnapshot, query, orderBy} from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\n\n\nfunction PostJp({user}) {\n  const {postId} = useParams();\n  const [post, setPost] = React.useState({author:{} });\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isFormVisible, setIsFormVisible] = React.useState(false); \n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const handleOpenModal = () => setIsModalOpen(true);\n  const handleCloseModal = () => setIsModalOpen(false);\n  const [songDatas, setSongDatas] = React.useState([]);\n  const [songName, setSongName] = React.useState('');\n  const [hiNote, setHiNote] = React.useState('');\n  const [hiNoteSharp, setHiNoteSharp] = React.useState('');\n  const [hiNoteOctave, setHiNoteOctave] = React.useState('');\n  const [lowNote, setLowNote] = React.useState('');\n  const [lowNoteSharp, setLowNoteSharp] = React.useState('');\n  const [lowNoteOctave, setLowNoteOctave] = React.useState('');\n  const [isMobile, setIsMobile] = React.useState(window.innerWidth <= 768);\n\n  React.useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth <= 768);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleDelete = async (songId) => {\n    const auth = getAuth();\n    if (!auth.currentUser) {\n      alert(\"ログインしてください\");\n      return;\n    }\n    try {\n      await deleteDoc(doc(db, `posts/${postId}/songDatas/${songId}`));\n      alert(\"削除成功！\");\n    } catch (error) {\n      console.error(\"削除失敗\", error);\n      alert(\"削除に失敗しました。後で再試行してください\");\n    }\n  };\n\n  const noteOptions = [\n    { key: 'C', value: 'C', text: 'C' },\n    { key: 'D', value: 'D', text: 'D' },\n    { key: 'E', value: 'E', text: 'E' },\n    { key: 'F', value: 'F', text: 'F' },\n    { key: 'G', value: 'G', text: 'G' },\n    { key: 'A', value: 'A', text: 'A' },\n    { key: 'B', value: 'B', text: 'B' },\n  ];\n  const sharpOptions = [\n    { key: '', value: '', text: '原音' },\n    { key: 'b', value: 'b', text: 'b' },\n    { key: '#', value: '#', text: '#' }\n  ];\n  const octaveOptions = [\n    { key: '0', value: '0', text: '0' },\n    { key: '1', value: '1', text: '1' },\n    { key: '2', value: '2', text: '2' },\n    { key: '3', value: '3', text: '3' },\n    { key: '4', value: '4', text: '4' },\n    { key: '5', value: '5', text: '5' },\n    { key: '6', value: '6', text: '6' },\n    { key: '7', value: '7', text: '7' },\n    { key: '8', value: '8', text: '8' },\n    { key: '9', value: '9', text: '9' },\n  ];\n  const defaultNote = noteOptions[0]?.value || 'C';\n  const defaultSharpOption = sharpOptions[0]?.value || '';\n  const defaultOctaveOption = octaveOptions[4]?.value || '4';\n\n  React.useEffect(() => {\n    const fetchPost = async () => {\n      const postRef = doc(db, \"posts\", postId);\n      const docSnap = await getDoc(postRef);\n      if (docSnap.exists()) {\n        setPost(docSnap.data());\n      } else {\n        console.log(\"No such document!\");\n      }\n    };\n    fetchPost();\n  }, [postId]);\n\n  // 獲取歌曲資料\n  React.useEffect(() => {\n    const songList = onSnapshot(\n      query(\n      collection(db, 'posts', postId, 'songDatas'),\n      orderBy(\"songName\", )),\n      (collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        // console.log(data);\n        setSongDatas(data);\n      }\n    );\n    return songList;\n  }, [postId]\n  );\n\n  // 提交新歌曲資料\n  const onSubmit = async () => {\n    if (!songName.trim()) { // 檢查是否為空\n      handleOpenModal();\n      return;\n    }\n\n    setIsLoading(true);\n\n    const auth = getAuth();\n    if (!auth.currentUser) {\n      alert(\"ログインしてください\");\n      return;}\n\n    // 組合 note, sharp 和 octave\n    const hiNoteValue = `${hiNote || defaultNote}${hiNoteSharp || defaultSharpOption}${hiNoteOctave || defaultOctaveOption}`;\n    const lowNoteValue = `${lowNote || defaultNote}${lowNoteSharp || defaultSharpOption}${lowNoteOctave || defaultOctaveOption}`;\n\n    // 增加資料\n    const songDataRef = collection(db, `posts/${postId}/songDatas`);\n    await addDoc(songDataRef, {\n      songId: crypto.randomUUID(),\n      songName: songName,\n      hiNote: hiNoteValue,\n      lowNote: lowNoteValue,\n      createdAt: serverTimestamp(),\n      author: {\n        uid: auth.currentUser.uid,\n        displayName: auth.currentUser.displayName || '',\n      }});\n\n    // //清空輸入框\n    setSongName('');\n    setHiNote('');\n    setHiNoteSharp('');\n    setHiNoteOctave('');\n    setLowNote('');\n    setLowNoteSharp('');\n    setLowNoteOctave('');\n    setIsLoading(false);\n  };\n\n  return (\n\n  <>\n  <Container>\n  <Grid>\n  <Grid.Row>\n\n    <Grid.Column width={2}></Grid.Column>\n\n    <Grid.Column width={13}>\n      <Comment.Group>\n\n        <Menu.Item>\n          {user && (\n          <Button\n            style={{ marginVertical: 25, width: 100, fontSize: '12px', }} \n            onClick={() => setIsFormVisible(!isFormVisible)}\n            >\n            {isFormVisible ? \"閉じる\" : \"曲目を追加\"}\n          </Button>\n          )}\n\n          <Header></Header>\n\n\n        </Menu.Item>\n        \n                {isFormVisible && (\n                <Form style={{ fontSize: '0.8em' }}>\n\n                  <Header>曲名</Header>\n                  <Form.Input\n                  style={{ width: '90%' }}\n                  value={songName} \n                  onChange={(e) => setSongName(e.target.value)} \n                  placeholder=\"曲名を入力してください\"/>\n\n                  <Header>最高音</Header>\n                  <Form.Group>\n                    <Form.Select \n                    options={noteOptions} \n                    value={hiNote || defaultNote} \n                    onChange={(e, { value }) => setHiNote(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                    <Form.Select \n                    options={sharpOptions} \n                    value={hiNoteSharp || defaultSharpOption} \n                    onChange={(e, { value }) => setHiNoteSharp(value)}\n                    style={{minWidth: '100px',}}\n                    />\n                    <Form.Select \n                    options={octaveOptions} \n                    value={hiNoteOctave || defaultOctaveOption} \n                    onChange={(e, { value }) => setHiNoteOctave(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                  </Form.Group>\n\n                  <Header>最低音</Header>\n                  <Form.Group>\n                    <Form.Select \n                    options={noteOptions} \n                    value={lowNote || defaultNote} \n                    onChange={(e, { value }) => setLowNote(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                    <Form.Select \n                    options={sharpOptions} \n                    value={lowNoteSharp || defaultSharpOption} \n                    onChange={(e, { value }) => setLowNoteSharp(value)}\n                    style={{minWidth: '100px',}} \n                    />\n                    <Form.Select \n                    options={octaveOptions} \n                    value={lowNoteOctave || defaultOctaveOption} \n                    onChange={(e, { value }) => setLowNoteOctave(value)}\n                    style={{minWidth: '60px',}}\n                    />\n                  </Form.Group>\n\n                  <Form.Button \n                  color='teal' \n                  style={{ margin: \"5px 0\", width: 60, fontSize: '12px' }} \n                  onClick={onSubmit} loading={isLoading}>\n                  保存\n                  </Form.Button>\n\n                </Form>\n                )}\n\n    <Modal open={isModalOpen} onClose={handleCloseModal} size=\"tiny\">\n    <Modal.Header>Warning</Modal.Header>\n    <Modal.Content>\n    <p>曲名は空白にできません。曲名を入力してください。</p>\n    </Modal.Content>\n    <Modal.Actions>\n    <Button onClick={handleCloseModal}>\n      戻る\n    </Button>\n    </Modal.Actions>\n    </Modal>\n\n\n        <Header>\n        アーティスト名: &nbsp;&nbsp; {post.title} <br />\n        曲数:&nbsp;{songDatas.length}\n        </Header>\n\n\n<Table>\n  <Table.Header>\n    <Table.Row>\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '1.1em',fontWeight: 'bold' }}>\n        {isMobile ? (\n        <div dangerouslySetInnerHTML={{ __html: 'タイトル<br>最低音<br>最高音' }} />\n        ) : ('タイトル')}\n        </Table.HeaderCell>\n\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{isMobile ? '' : '最低音'}</Table.HeaderCell>\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{isMobile ? '' : '最高音'}</Table.HeaderCell>\n      <Table.HeaderCell style={{minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{isMobile ? '' : 'creator'}</Table.HeaderCell>\n      <Table.HeaderCell style={{minWidth: '1px'}}></Table.HeaderCell>\n    </Table.Row>\n  </Table.Header>\n\n  <Table.Body>\n    {songDatas.map((songDatas) => {\n      return (\n        <Table.Row key={songDatas.id}>\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.9em',fontWeight: 'bold' }}>{songDatas.songName}</Table.Cell>\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.8em' }}>{isMobile ? 'LowNote: ' : ''}{songDatas.lowNote}</Table.Cell>\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.8em' }}>{isMobile ? 'HiNote: ' : ''}{songDatas.hiNote}</Table.Cell>\n\n          <Table.Cell style={{ minWidth: '1px', fontSize: '0.7em' }}>\n          {isMobile ? 'createdBy:' : 'by:'} {songDatas.author.displayName || 'newUser'}\n          </Table.Cell>\n\n\n          \n          <Table.Cell  >\n            {user?.uid === songDatas.author.uid && (\n              <Button\n              style={{ minWidth: '1px', fontSize: '0.7em' }}\n              color=\"red\" size=\"mini\" \n              onClick={() => handleDelete(songDatas.id)}\n              >\n              削除\n              </Button>\n            )}\n          </Table.Cell>\n          \n        </Table.Row>\n      );\n    })}\n  </Table.Body>\n</Table>\n\n\n\n      </Comment.Group>\n    </Grid.Column>\n\n    <Grid.Column width={1}></Grid.Column>\n\n  </Grid.Row>\n  </Grid>\n  </Container>\n  </>\n  )\n}\n\nexport default PostJp;","import React from 'react';\nimport { Grid, Item, Container, Header,Button, Segment, Modal,Input } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { getAuth, updateProfile, EmailAuthProvider, reauthenticateWithCredential, updatePassword } from \"firebase/auth\";\n\nfunction MyName({user}){\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [displayName, setDisplayName] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n    setDisplayName('');  // 清空名稱欄位\n  }\n\n  function onSubmit() {\n    setIsLoading(true);\n    updateProfile(user, {\n      displayName: displayName,\n    })\n    .then(()=>{\n    setDisplayName('');\n    setIsModalOpen(false);\n    setIsLoading(false);\n    })\n    .catch((error) => {\n      console.error(\"更新エラー:\", error);\n      setIsLoading(false);\n    });\n  }\n\n  return(\n    <>\n      <Header size='small'>\n        なまえ．ニックネーム\n        <Button floated='right' onClick={handleOpenModal}>変更</Button>\n      </Header>\n      <Segment vertical >{user?.displayName || \"未設定\"}</Segment>\n      <Modal size='mini' open={isModalOpen}>\n        <Modal.Header>ユーザー名を編集する</Modal.Header>\n        <Modal.Content>\n          <Input\n          style={{ fontSize: \"12px\" }}\n          fluid\n          placeholder='新しいユーザー名を入力してください' \n          value={displayName} \n          onChange={(e) => setDisplayName(e.target.value)}\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={()=> setIsModalOpen(false)}>キャンセル</Button>\n          <Button onClick={onSubmit} loading={isLoading} >保存</Button>\n        </Modal.Actions>\n      </Modal>\n    </>\n  )\n}\n\nfunction MyPassword({user}){\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [oldPassword, setOldPassword] = React.useState('');\n  const [newPassword, setNewPassword] = React.useState('');\n  const [confirmPassword, setConfirmPassword] = React.useState('');\n  const [isPasswordVisible, setIsPasswordVisible] = React.useState(false);\n\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n    setOldPassword('');  // 清空舊密碼欄位\n    setNewPassword('');   // 清空新密碼欄位\n    setConfirmPassword('');  // 清空確認密碼欄位\n    setIsPasswordVisible(false); // 每次開啟時重設密碼為隱藏\n  }\n\n  function onSubmit() {\n    if (newPassword !== confirmPassword) {\n      alert(\"新しいパスワードと確認用パスワードが一致しません\");\n      return;\n    }\n\n    setIsLoading(true);\n    const auth = getAuth();\n    const credential = EmailAuthProvider.credential(user.email, oldPassword); // 使用新的認證提供者\n\n    reauthenticateWithCredential(auth.currentUser, credential) // 使用 auth.currentUser 進行重新驗證\n      .then(() => {\n        updatePassword(auth.currentUser, newPassword) // 使用 auth.currentUser 更新密碼\n          .then(() => {\n            setIsModalOpen(false);\n            setOldPassword('');\n            setNewPassword('');\n            setConfirmPassword('');\n            setIsLoading(false);\n          })\n          .catch((error) => {\n            console.error(\"パスワードの更新に失敗しました:\", error);\n            setIsLoading(false);\n          });\n      })\n      .catch((error) => {\n        console.error(\"認証に失敗しました:\", error);\n        setIsLoading(false);\n      });\n  }\n\n  return (\n    <>\n      <Header size='small'>\n        パスワード\n        <Button floated='right' onClick={handleOpenModal}>\n          変更\n          </Button>\n      </Header>\n      <Segment vertical ></Segment>\n      <Modal size='mini' open={isModalOpen}>\n        <Modal.Header>パスワード変更</Modal.Header>\n        <Modal.Content>\n          <Header>現在のパスワード</Header>\n          <Input\n          fluid\n          style={{ fontSize: \"12px\" }}\n          placeholder='パスワードを入力してください' \n          value={oldPassword} \n          onChange={(e) => setOldPassword(e.target.value)}\n          type={isPasswordVisible ? 'text' : 'password'}\n          />\n          <Header>新しいパスワード</Header>\n          <Input\n          fluid\n          style={{ fontSize: \"12px\" }}\n          placeholder='新しいパスワードを入力してください' \n          value={newPassword} \n          onChange={(e) => setNewPassword(e.target.value)}\n          type={isPasswordVisible ? 'text' : 'password'}\n          />\n          <Header>新しいパスワード（確認用）</Header>\n          <Input\n          fluid\n          style={{ fontSize: \"12px\" }}\n          placeholder='新しいパスワードを入力してください'\n          value={confirmPassword}\n          onChange={(e) => setConfirmPassword(e.target.value)}\n          type={isPasswordVisible ? 'text' : 'password'}\n          />\n\n          <div style={{ marginTop: '10px' }}>\n            <Input\n              type=\"checkbox\"\n              style={{ fontSize: \"9px\" }}\n              label=\"パスワードを表示する\"\n              onChange={() => setIsPasswordVisible(!isPasswordVisible)}  // 切換顯示狀態\n            />\n          </div>\n\n\n\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={()=> setIsModalOpen(false)}>キャンセル</Button>\n          <Button onClick={onSubmit} loading={isLoading} >保存</Button>\n        </Modal.Actions>\n      </Modal>\n    </>\n  )\n}\n\nfunction MySettingsJp ({user}){\n\n  return (\n    <Container>\n\n    <Grid>\n  <Grid.Row>\n    <Grid.Column width={2}></Grid.Column>\n\n    <Grid.Column width={11}>\n      <>\n      <Header>会員情報</Header>\n      <MyName user={user} />\n      <MyPassword user={user} />\n      <Button color='pink' as={Link} to='/jp/posts' style={{ marginTop: '5px' }} >戻る</Button>\n      </>\n    </Grid.Column>\n\n    <Grid.Column width={2}></Grid.Column>\n\n  </Grid.Row>\n</Grid>\n\n    </Container>\n\n  )\n}\n\nexport default MySettingsJp;","import React, { useState, useEffect } from 'react';\nimport { Routes, Route, Navigate, useLocation,useNavigate } from 'react-router-dom';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from './utils/firebase';\n\nimport HeaderEn from \"./pages/en/HeaderEn\";\nimport SigninEn from \"./pages/en/SigninEn\";\nimport RegisterSuccessEn from \"./pages/en/RegisterSuccessEn\";\nimport PostsEn from \"./pages/en/PostsEn\";\nimport NewArtistEn from \"./pages/en/NewArtistEn\";\nimport PostEn from \"./pages/en/PostEn\";\nimport MySettingsEn from \"./pages/en/MySettingsEn\";\n// import PostFastEn from \"./pages/en/PostFastEn\";\n// import ListFastEn from \"./pages/en/ListFastEn\";\n\nimport HeaderZh from \"./pages/zh/HeaderZh\";\nimport SigninZh from \"./pages/zh/SigninZh\";\nimport RegisterSuccessZh from \"./pages/zh/RegisterSuccessZh\";\nimport PostsZh from \"./pages/zh/PostsZh\";\nimport NewArtistZh from \"./pages/zh/NewArtistZh\";\nimport PostZh from \"./pages/zh/PostZh\";\nimport MySettingsZh from \"./pages/zh/MySettingsZh\";\n\nimport HeaderJp from \"./pages/jp/HeaderJp\";\nimport SigninJp from \"./pages/jp/SigninJp\";\nimport RegisterSuccessJp from \"./pages/jp/RegisterSuccessJp\";\nimport PostsJp from \"./pages/jp/PostsJp\";\nimport NewArtistJp from \"./pages/jp/NewArtistJp\";\nimport PostJp from \"./pages/jp/PostJp\";\nimport MySettingsJp from \"./pages/jp/MySettingsJp\";\n\nfunction App() {\n  const [user, setUser] = useState(null); // 記錄當前用戶的狀態\n  const location = useLocation(); // 獲取當前路徑\n  const navigate = useNavigate();\n  const language = location.pathname.split('/')[1]; // 從路徑中提取語言部分\n\n  useEffect(() => {\n    const authListener = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser); // 設置用戶狀態\n    });\n    return () => authListener(); // 清除監聽\n  }, []);\n\n  useEffect(() => {\n    if (!['en', 'zh', 'jp'].includes(language)) {\n      navigate(`/en${location.pathname}`, { replace: true });\n    } else if (location.pathname === `/${language}`) {\n      // 如果當前語言只有 `/en`, `/zh`, `/jp`，則導向到 posts\n      navigate(`/${language}/posts`, { replace: true });\n    }\n  }, [language, navigate, location.pathname]);\n\n  // 根據語言顯示對應的 Header\n  const renderHeader = () => {\n    switch (language) {\n      case 'en':\n        return <HeaderEn user={user} />;\n      case 'zh':\n        return <HeaderZh user={user} />;\n      case 'jp':\n        return <HeaderJp user={user} />;\n      default:\n        return <HeaderEn user={user} />; // 默認為英文\n    }\n  };\n\n  return (\n    <>\n      {renderHeader()}\n      <Routes>\n        <Route path=\"/\" element={<Navigate to=\"/en/posts\" />} />\n        <Route path=\"/en\" element={<Navigate to=\"/en/posts\" />} />\n\n\n        {/* English Routes */}\n        <Route path=\"/en/posts\" element={<PostsEn />} />\n        <Route path=\"/en/signin\" element={<SigninEn />} />\n        <Route path=\"/en/registersuccess\" element={<RegisterSuccessEn user={user} />} />\n        <Route path=\"/en/new-artist\" element={user ? <NewArtistEn /> : <Navigate to=\"/en/posts\" />} />\n        <Route path=\"/en/posts/:postId\" element={<PostEn user={user} />} />\n        <Route path=\"/en/mysettings\" element={user ? <MySettingsEn user={user} /> : <Navigate to=\"/en/posts\" />} />\n        {/* <Route path=\"/en/posts/:postId/postfast\" element={<PostFastEn user={user} />} />\n        <Route path=\"/en/listfast\" element={<ListFastEn user={user} />} /> */}\n\n        {/* Chinese Routes */}\n        <Route path=\"/zh/posts\" element={<PostsZh />} />\n        <Route path=\"/zh/signin\" element={<SigninZh />} />\n        <Route path=\"/zh/registersuccess\" element={<RegisterSuccessZh />} />\n        <Route path=\"/zh/new-artist\" element={user ? <NewArtistZh /> : <Navigate to=\"/zh/posts\" />} />\n        <Route path=\"/zh/posts/:postId\" element={<PostZh user={user} />} />\n        <Route path=\"/zh/mysettings\" element={user ? <MySettingsZh user={user} /> : <Navigate to=\"/zh/posts\" />} />\n\n        {/* Japanese Routes */}\n        <Route path=\"/jp/posts\" element={<PostsJp />} />\n        <Route path=\"/jp/signin\" element={<SigninJp />} />\n        <Route path=\"/jp/registersuccess\" element={<RegisterSuccessJp user={user} />} />\n        <Route path=\"/jp/new-artist\" element={user ? <NewArtistJp /> : <Navigate to=\"/jp/posts\" />} />\n        <Route path=\"/jp/posts/:postId\" element={<PostJp user={user} />} />\n        <Route path=\"/jp/mysettings\" element={user ? <MySettingsJp user={user} /> : <Navigate to=\"/jp/posts\" />} />\n      </Routes>\n    </>\n  );\n}\n\nexport default App;\n\n\n\n\n\n// 2/7 15:00\n// import React from 'react';\n// import { BrowserRouter, Route,Routes, Navigate, useLocation } from 'react-router-dom';\n// import { onAuthStateChanged } from 'firebase/auth';\n// import { auth, db } from './utils/firebase';\n\n// import HeaderEn from \"./pages/en/HeaderEn\";\n// import SigninEn from \"./pages/en/SigninEn\";\n// import RegisterSuccessEn from \"./pages/en/RegisterSuccessEn\";\n// import PostsEn from \"./pages/en/PostsEn\";\n// import NewArtistEn from \"./pages/en/NewArtistEn\";\n// import PostEn from \"./pages/en/PostEn\";\n// import MySettingsEn from \"./pages/en/MySettingsEn\";\n// import PostFastEn from \"./pages/en/PostFastEn\";\n// import ListFastEn from \"./pages/en/ListFastEn\";\n\n// function App() {\n//   const [user, setUser] = React.useState(null);\n//   React.useEffect(() => {\n//     const authListener = onAuthStateChanged(auth, (currentUser) => {\n//       setUser(currentUser);\n//     });\n//     return () => authListener();\n//   }, []);\n\n//   return (\n//     <BrowserRouter>\n//       <HeaderEn user={user} />\n//       <Routes>\n//         <Route path=\"/\" element={<Navigate to=\"/en/posts\" />} />\n//         <Route path=\"/en/posts\" element={<PostsEn />} />\n//         <Route path=\"/en/signin\" element={<SigninEn />} />\n//         <Route path=\"/en/registersuccess\" element={<RegisterSuccessEn user={user} />} />\n//         <Route path=\"/en/new-artist\" element={user ? <NewArtistEn /> : <Navigate to=\"/posts\" />} />\n//         <Route path=\"/en/posts/:postId\" element={<PostEn user={user} />} />\n//         <Route path=\"/en/mysettings\" element={user ? <MySettingsEn user={user} /> : <Navigate to=\"/posts\" />} />\n//         <Route path=\"/en/posts/:postId/postfast\" element={<PostFastEn user={user} />} />\n//         <Route path=\"/en/listfast\" element={<ListFastEn user={user} />} />\n//       </Routes>\n//     </BrowserRouter>\n//   );\n// }\n// export default App;\n\n\n\n\n\n// import React from 'react';\n// import { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\n// import { onAuthStateChanged } from 'firebase/auth';\n// import { auth, db } from './utils/firebase';\n\n\n// import Header from \"./Header\";\n// import Signin from \"./pages/signin\";\n// import RegisterSuccess from \"./pages/registersuccess\";\n// import Posts from \"./pages/Posts\";\n// import NewArtist from \"./pages/NewArtist\";\n// import Post from \"./pages/Post\";\n// import MySettings from \"./pages/MySettings\";\n// import PostFast from \"./pages/PostFast\";\n// import ListFast from \"./pages/ListFast\";\n\n\n\n\n// function App () {\n//   const [user, setUser] = React.useState(null);\n//   React.useEffect(() => {\n//     const authListener = onAuthStateChanged(auth, (currentUser) => {\n//       setUser(currentUser);\n//     });\n//     return () => authListener(); // 清除監聽，避免 memory leak\n//   }, []);\n\n\n\n//   return (\n//     <BrowserRouter>\n\n        \n\n//         <Header user={user}/>\n\n//         <Switch>\n//           <Route path='/posts' exact>\n//             <Posts />\n//           </Route>\n\n//           <Route path='/signin' exact>\n//           {user ? <Redirect to='posts'/>\n//           : <Signin /> }\n//           </Route>\n          \n\n//           <Route path='/registersuccess' exact>\n//           {user ? <Redirect to='posts'/>\n//           : <RegisterSuccess />}\n//           </Route>\n\n//           <Route path='/new-artist' exact>\n//           {user ? <NewArtist />\n//           : <Redirect to='posts'/> }\n//           </Route>\n\n//           <Route path='/posts/:postId' exact>\n//             <Post user={user}/>\n//           </Route>\n\n//           <Route path='/mysettings' exact>\n//           {user ? <MySettings user={user} />\n//           : <Redirect to='posts'/> }\n//           </Route>\n\n//           <Route path='/posts/:postId/postfast' exact>\n//             <PostFast user={user}/>\n//           </Route>\n\n//           <Route path='/listfast' exact>\n//             <ListFast user={user}/>\n//           </Route>\n\n\n\n//         </Switch>\n\n\n\n//     </BrowserRouter>\n//   );\n// }\n\n// export default App;","import ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n\n\n\n\n// 2/7 15:00\n// import ReactDOM from 'react-dom';\n// import 'semantic-ui-css/semantic.min.css';\n// import App from './App';\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}